define("conf",function(t,e,a){function o(t,e){e.plansin_body="main/html/program/part_by.html",e.matter_url="main/html/program/part_qb.html";var a=localStorage.getItem("prcodeid"),o=localStorage.getItem("scodeid"),n={codeid:a,type:!0,sname:"原材",now:""};angular.forEach(e.program_plan_sinlist.datalist,function(t,e){t.now=t.codeid==o?"active":""}),n.now=o?"":"active",e.program_plan_sinlist.datalist.unshift(n),e.stype="byornot",e.yctype=0}function n(t,e){return e="object"==typeof e?JSON.stringify(e):e,localStorage.setItem(t,e),!0}function i(t){return t?new Date(t).valueOf():(new Date).valueOf()}function r(t){var e="";if(parseInt(t)>0){var a=new Date(t),o=a.getYear()+1900,n=a.getMonth()+1;n=n<10?"0"+n:n;var i=a.getDate();return i=i<10?"0"+i:i,o+"-"+n+"-"+i}return e}function c(t){var e=[];if(t){var a=t.split(",");return a.map(function(t){e.push({val:t})}),e}return e}function l(t){return t.value?t.value:""}window.ycchart=function(t,e){YS("echarts",function(){var a={title:{text:e,textStyle:{fontSize:"16"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{y:"25",x:"right",data:["已送","未送","漏送","异常"]},grid:{left:"3%",right:"4%",bottom:"3%",top:"50",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:t.name},series:[{name:"已送",type:"bar",stack:"总量",label:{normal:{show:!0,formatter:l,position:"insideRight"}},itemStyle:{normal:{color:"#00cc33"}},data:t.ys},{name:"未送",type:"bar",stack:"总量",label:{normal:{show:!0,formatter:l,position:"insideRight"}},itemStyle:{normal:{color:"#BBB"}},data:t.ws},{name:"漏送",type:"bar",stack:"总量",label:{normal:{show:!0,formatter:l,position:"insideRight"}},itemStyle:{normal:{color:"#FF6666"}},data:t.ls}]},o=echarts.init(document.getElementById("barone"),"vintage");o.setOption(a)},"vintage")},window.hntchart=function(t,e){YS("echarts",function(){var a={title:{text:e,textStyle:{fontSize:"16"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{y:"25",x:"right",data:["已送","未送","漏送","异常"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:t.name},series:[{name:"已送",type:"bar",stack:"总量",label:{normal:{show:!0,formatter:l,position:"insideRight"}},itemStyle:{normal:{color:"#00cc33"}},data:t.ys},{name:"未送",type:"bar",stack:"总量",label:{normal:{show:!0,formatter:l,position:"insideRight"}},itemStyle:{normal:{color:"#bbbbbb"}},data:t.ws},{name:"漏送",type:"bar",stack:"总量",label:{normal:{show:!0,formatter:l,position:"insideRight"}},itemStyle:{normal:{color:"#FF6666"}},data:t.ls},{name:"异常",type:"bar",stack:"总量",label:{normal:{show:!0,formatter:l,position:"insideRight"}},itemStyle:{normal:{color:"#F93"}},data:t.yc}]},o=echarts.init(document.getElementById("bartwo"),"vintage");o.setOption(a)},"vintage")},window.config={url:{ysmenu_list:{url:"ver1/Index/menu",method:"get"},com_info:{url:"ver1/Index/userinfo",method:"post"},com_request:{url:"ver1/Login/index",method:"post"},com_share:{url:"ver1/Index/share",method:"post"},com_feed:{url:"ver1/Open/adfeed",method:"post"},com_jilu:{url:"ver1/Index/es",method:"post"},com_wendu:{url:"ver1/Index/wendu",method:"post"},accountbind:{url:"ver1/Login/qqwebind",method:"post"},createbind:{url:"ver1/Login/qqweaddbind",method:"post"},register:{url:"ver1/Login/register",method:"post"},com_login:{url:"ver1/Login/login",method:"get"},com_logout:{url:"ver1/Login/loginout",method:"get"},com_province:{url:"ver1/Open/prov",method:"post"},com_city:{url:"ver1/Open/city",method:"post"},com_ea:{url:"ver1/Index/com_ea",method:"post"},com_em:{url:"ver1/Index/com_em",method:"post"},com_ed:{url:"ver1/Index/com_ed",method:"post"},com_zl:{url:"ver1/Ziliao/getzldata",method:"post"},com_updatezl:{url:"ver1/Ziliao/updatezldata",method:"post"},program_pro_list:{url:"ver1/Index/program_pro_list",method:"get",load:1},program_pro_add:{url:"ver1/Index/program_pro_add",method:"post"},program_pro_del:{url:"ver1/Index/program_pro_del",method:"post"},program_pro_sinadd:{url:"ver1/Index/program_pro_sinadd",method:"post"},program_pro_sinedit:{url:"ver1/Index/program_pro_sinedit",method:"post"},program_pro_sindel:{url:"ver1/Index/program_pro_sindel",method:"post"},program_pro_info:{url:"ver1/Index/program_pro_info",method:"post"},program_base_info:{url:"ver1/Index/program_pro_info",method:"post"},program_sinlist_sinlist:{url:"ver1/Index/program_sinlist",method:"get"},program_sinlist_sinadd:{url:"ver1/Index/program_pro_sinadd",method:"post"},program_sinlist_sinedit:{url:"ver1/Index/program_pro_sinedit",method:"post"},program_sinlist_sindel:{url:"ver1/Index/program_pro_sindel",method:"post"},program_plan_sinlist:{url:"ver1/Index/program_sinlist",method:"get"},program_plan_matterlist:{url:"ver1/Index/program_plan_matterlist",load:1},program_plan_matterdel:{url:"ver1/Index/com_ed",method:"post"},program_plan_matteradd:{url:"ver1/Index/program_plan_matteradd",method:"post"},program_plan_matteredit:{url:"ver1/Index/program_plan_matteredit",method:"post"},program_plan_betonlist:{url:"ver1/Index/program_plan_betonlist",method:"get",load:1},program_plan_betondel:{url:"ver1/Index/com_ed",method:"post"},program_plan_betonadd:{url:"ver1/Index/program_plan_betonadd",method:"post"},program_plan_betonedit:{url:"ver1/Index/program_plan_betonedit",method:"post"},program_gether_sel:{url:"ver1/Index/program_gether",method:"get",load:1},program_gether_jilu:{url:"ver1/Index/program_gether_jilu",method:"post",load:1},program_gether_save:{url:"ver1/Index/program_gether_save",method:"post",load:1},program_gether_del:{url:"ver1/Index/com_ed",method:"post"},program_work_sinlist:{url:"ver1/Index/program_sinlist",method:"get"},program_work_nodelist:{url:"ver1/Index/program_work_nodelist",method:"get"},program_work_sinimage:{url:"ver1/Index/program_work_sinimage",method:"get",load:1},program_work_matcount:{url:"ver1/Index/program_work_matcount",method:"get"},program_gantt_list:{url:"ver1/Index/program_gantt_list",method:"get"},program_gantt_add:{url:"ver1/Index/program_gantt_add",method:"post"},program_gantt_del:{url:"ver1/Index/program_gantt_del",method:"post"},program_gantt_edit:{url:"ver1/Index/program_gantt_edit",method:"post"},program_gantt_worklist:{url:"ver1/Index/program_gantt_worklist",method:"get"},program_gantt_workadd:{url:"ver1/Index/program_gantt_workadd",method:"post"},program_gantt_workdel:{url:"ver1/Index/com_ed",method:"post"},program_gantt_workedit:{url:"ver1/Index/program_gantt_workedit",method:"post"},program_struct_sel:{url:"ver1/Index/program_struct_mulu",method:"get",load:1},program_struct_edit:{url:"ver1/Index/program_struct_edit",method:"get"},program_weather_list:{url:"ver1/Index/service_weather_list",method:"post"},operate_user_list:{url:"ver1/Index/operate_user_list",method:"post"},operate_logincount_list:{url:"ver1/Index/operate_login_list",method:"post"},operate_com_list:{url:"ver1/Index/operate_com_list",method:"post"},operate_pro_list:{url:"ver1/Index/operate_pro_list",method:"post"},operate_usergather_list:{url:"ver1/Index/loginStatistic",method:"post"},system_city_list:{url:"ver1/Index/system_city_list",method:"post"},system_mattertpl_list:{url:"ver1/Index/system_mattertpl_list",method:"post"},system_mattertpl_del:{url:"ver1/Index/com_ed",method:"post"},system_tbtype_list:{url:"json/data.json",method:"post"},system_tbtype_del:{url:"ver1/Index/com_ed",method:"post"},system_tongbiao_tplist:{url:"ver1/Index/system_tbtype_list",method:"post"},system_tongbiao_list:{url:"ver1/Index/system_tongbiao_list",method:"post"},system_tongbiao_del:{url:"ver1/Index/com_ed",method:"post"},service_weather_list:{url:"ver1/Index/service_weather_list",method:"post"},service_weather_del:{url:"ver1/Index/com_ed",method:"post"},user_info_list:{url:"ver1/Index/user_password_info",method:"post"},user_info_psd:{url:"ver1/Index/user_password_change",method:"post"}},win:{program_pro_info:{template:"program_pro_base",title:"工程概况",temdata:{}},program_pro_sinadd:{template:"program_pro_sinadd",title:"添加子单位",temdata:{sname:"",cengshu:"",codeid:"",jiegou:"",jichu:"",zhuti:""}},program_pro_sinedit:{template:"program_pro_sinedit",title:"编辑子单位",temdata:{}},program_pro_add:{template:"program_pro_add",title:"创建工程",temdata:{prname:"",pid:"",cityid:"",jiegou:"",kaigong:"",jungong:""}},program_gantt_add:{template:"program_gantt_add",title:"新建横道图",temdata:{htitle:"",ftitle:"",comtitle:"",btime:"",etime:"",hadd_time:"",beizhu:""}},program_gantt_edit:{template:"program_gantt_edit",title:"横道图编辑",temdata:{}},program_gantt_workedit:{template:"program_gantt_workedit",title:"横道图作业编辑",temdata:{}},program_plan_set:{template:"program_plan_set",title:"送检计划-混凝土-设置",temdata:{}},program_plan_matergather:{template:"program_plan_matergather",title:"送检计划-原材-汇总打印",temdata:{}},program_plan_factoryset:{template:"program_plan_factoryset",title:"送检计划-原材-出厂编号",temdata:{}},program_plan_materypset:{template:"program_plan_materypset",title:"送检计划-原材-样品编号",temdata:{}},program_plan_betongather:{template:"program_plan_betongather",title:"送检计划-混凝土-汇总打印",temdata:{}},program_plan_chipset:{template:"program_plan_chipset",title:"送检计划-混凝土-标养等芯片",temdata:{}},program_plan_betonypset:{template:"program_plan_betonypset",title:"送检计划-混凝土-标养等样品",temdata:{}},program_plan_resultset:{template:"program_plan_resultset",title:"送检计划-混凝土-标养等结果",temdata:{}},program_plan_comset:{template:"program_plan_comset",title:"",temdata:{}},system_pages_add:{template:"system_image_set",title:"添加幻灯片",temdata:{}},system_pages_edit:{template:"system_image_set",title:"编辑幻灯片",temdata:{}},program_plan_datelist:{template:"program_plan_datelist",title:"龄期",temdata:{}},program_plan_wealist:{template:"program_plan_wealist",title:"累计温度/龄期",temdata:{}},user_info_tel:{template:"user_info_tel",title:"绑定手机",temdata:{}},user_info_password:{template:"user_info_password",title:"修改密码",temdata:{}},user_info_win:{template:"user_info_win",title:"工程上限",temdata:{}},feed:{template:"feed",title:"意见反馈",temdata:{}},ycexcel:{template:"ycexcel",title:"导入excel",temdata:{}},byexcel:{template:"byexcel",title:"导入excel",temdata:{}}},port:{program_sinlist:{sinlist:{method:"post",facfun:"post_data",pname:"送检计划-子单位列表",send:{codeid:""},before:function(){config.port.program_sinlist.sinlist.send.codeid=localStorage.getItem("prcodeid")}},sinadd:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"添加子单位"},sinedit:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"编辑子单位"},sindel:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"删除子单位"}},program_pro:{list:{facfun:"post_data_watch_page",t:1,send:{nowpage:0,listnum:5},pname:"工程列表页面列表",fun:function(t,e){t.data.datalist.length&&(n("prcodeid",t.data.datalist[0].codeid),n("prname",t.data.datalist[0].prname),t.data.datalist[0].sinchl.datalist.length&&n("scodeid",t.data.datalist[0].sinchl.datalist[0].codeid))}},add:{method:"post",facfun:"post_data_watch",t:0,send:{pid:"",cityid:"",kaigong:"",jungong:"",jiegou:"",prname:""},pname:"添加工程"},del:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"删除工程"},sinadd:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"添加子单位"},sinedit:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"编辑子单位"},sindel:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"删除子单位"},info:{method:"post",facfun:"post_data_watch",t:0,send:{codeid:""},pname:"获取工程信息"}},program_base:{info:{method:"post",facfun:"post_data_watch",t:1,send:{codeid:""},before:function(){config.port.program_base.info.send.codeid=localStorage.getItem("prcodeid")},pname:"获取工程信息"}},program_work:{sinlist:{method:"post",facfun:"post_data",pname:"进度管理-子单位列表",send:{codeid:""},before:function(){config.port.program_work.sinlist.send.codeid=localStorage.getItem("prcodeid")},fun:function(t,e){if(0==t.data.datalist.length)layer.msg("请先添加子单位",{icon:0});else{localStorage.getItem("scodeid")||(localStorage.setItem("scodeid",t.data[0].codeid),localStorage.setItem("sname",t.data[0].sname));var a=localStorage.getItem("scodeid");e.program_work_sinimageData.scodeid=a,e.program_work_sinimageTime.time=i()}}},sinimage:{method:"post",facfun:"post_data_watch",t:0,send:{codeid:""},pname:"进度管理-子单位进度图详情",before:function(){config.port.program_work.sinimage.send.codeid=localStorage.getItem("scodeid")},fun:function(t,e){setTimeout(function(){$('*[data-toggle="tooltip"]').tooltip()},800),e.quanbu=t.quanbu,e.jichu=t.jichu,e.zhuti=t.zhuti;var a=[e.quanbu,e.jichu,e.zhuti],o=["","-基础","-主体"],n=localStorage.getItem("sname"),i=n+o[e.showtype]+"- 送检统计图";hntchart(a[e.showtype],i)}},matcount:{method:"post",facfun:"post_data_watch",t:1,send:{codeid:""},pname:"进度管理-子单位统计信息详情",before:function(){config.port.program_work.matcount.send.codeid=localStorage.getItem("prcodeid")},fun:function(t,e){e.yuancai=t.data,ycchart(t.data,"工程原材送检统计图")}}},program_plan:{sinlist:{method:"post",facfun:"post_data",fun:o,pname:"送检计划-子单位列表",send:{codeid:""},before:function(){config.port.program_plan.sinlist.send.codeid=localStorage.getItem("prcodeid")}},matterlist:{facfun:"post_data_watch",t:0,pname:"送检计划-原材列表",send:{codeid:""},before:function(){config.port.program_plan.matterlist.send.codeid=localStorage.getItem("prcodeid")},fun:function(t,e){angular.forEach(e.program_plan_matterlist.datalist,function(t){t.morder=parseInt(t.morder),t.jieguoarr=c(t.jieguo),t.ypbharr=c(t.ypbh),t.ccpharr=c(t.ccph)})}},matterdel:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"送检计划-原材删除"},matteradd:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"送检计划-原材添加"},matteredit:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"送检计划-原材编辑"},betonlist:{facfun:"post_data_watch",t:1,pname:"送检计划-子单位送检列表",send:{codeid:"",type:"byornot"},before:function(){config.port.program_plan.betonlist.send.codeid=localStorage.getItem("scodeid")},fun:function(t,e){e.winsongjian=[],e.winyuancai=[];i(r((new Date).getTime()))/1e3;angular.forEach(e.program_plan_betonlist.datalist,function(t){t.myorder=parseInt(t.myorder),t.byjgarr=c(t.byjg),t.bybharr=c(t.bybh),t.xinpianarr=c(t.xinpian),t.tyjgarr=c(t.tyjg),t.tybharr=c(t.tybh),t.tyxinpianarr=c(t.tyxinpian),t.ksjgarr=c(t.ksjg),t.ksbharr=c(t.ksbh),t.ztjgarr=c(t.ztjg),t.ztbharr=c(t.ztbh),t.ztxinpianarr=c(t.ztxinpian),t.cmjgarr=c(t.cmjg),t.cmbharr=c(t.cmbh),t.dzjgarr=c(t.dzjg),t.dzbharr=c(t.dzbh),t.dzguigearr=c(t.dzguige),t.dzpaihaoarr=c(t.dzpaihao),t.dzchangjiaarr=c(t.dzchangjia),t.qzjgarr=c(t.qzjg),t.qzbharr=c(t.qzbh),t.wqjgarr=c(t.wqjg),t.wqbharr=c(t.wqbh),t.nqjgarr=c(t.nqjg),t.nqbharr=c(t.nqbh),t.zpjgarr=c(t.zpjg),t.zpbharr=c(t.zpbh),t.ccpharr=c(t.ccph)})}},betonadd:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"送检计划-子单位送检添加部位"},betondel:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"送检计划-子单位送检删除"},betonedit:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"送检计划-子单位送检编辑"}},program_gantt:{list:{method:"get",facfun:"post_data",send:{codeid:""},pname:"横道图",before:function(){config.port.program_gantt.list.send.codeid=localStorage.getItem("prcodeid")}},add:{facfun:"post_data_watch",t:0,send:{},pname:"横道图-添加"},del:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"横道图-删除"},edit:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"横道图-编辑"},worklist:{method:"get",facfun:"post_data_watch",t:0,send:{codeid:""},pname:"横道图作业",before:function(){config.port.program_gantt.worklist.send.codeid=localStorage.getItem("hcodeid")},fun:function(t,e){angular.forEach(t.data.datalist,function(t){t.myorder=parseInt(t.myorder)}),e.program_gantt_worklist=t.data}},workdel:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"横道图-作业删除"}},program_gether:{sel:{facfun:"post_data_watch",t:1,send:{btime:"",etime:"",codeid:""},pname:"送检汇总",before:function(){config.port.program_gether.sel.send.codeid=localStorage.getItem("prcodeid"),config.port.program_gether.sel.send.btime=r((new Date).getTime()),config.port.program_gether.sel.send.etime=r((new Date).getTime()+6048e5)},fun:function(t,e){setTimeout(function(){$('*[data-toggle="tooltip"]').tooltip()},800);var a=e.program_gether_sel,o=["yc","by","ty","ks","zt","dz","cm","qz","nq","wq","zp"];o.map(function(t){if(a[t].hzlist.length>0){var e=t+"jg",o=t+"jgarr",n=t+"bh",i=t+"bharr";angular.forEach(a[t].hzlist,function(a){"by"==t&&(a.xinpianarr=c(a.xinpian)),"yc"==t?(a.jieguoarr=c(a.jieguo),a.ypbharr=c(a.ypbh),a.ccpharr=c(a.ccph)):(a[o]=c(a[e]),a[i]=c(a[n]))})}if(a[t].lslist.length>0){var e=t+"jg",o=t+"jgarr",n=t+"bh",i=t+"bharr";angular.forEach(a[t].lslist,function(a){"by"==t&&(a.xinpianarr=c(a.xinpian)),"yc"==t?(a.jieguoarr=c(a.jieguo),a.ypbharr=c(a.ypbh),a.ccpharr=c(a.ccph)):(a[o]=c(a[e]),a[i]=c(a[n]))})}})}},jilu:{method:"post",facfun:"post_data_watch_page",t:0,send:{codeid:"",nowpage:0,listnum:30},pname:"查询送检记录",before:function(){config.port.program_gether.jilu.send.codeid=localStorage.getItem("prcodeid")}},save:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"保存送检记录"},del:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"送检记录删除"}},program_struct:{edit:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"目录保存"},sel:{facfun:"post_data_watch",t:1,send:{codeid:""},pname:"土建资料",before:function(){config.port.program_struct.sel.send.codeid=localStorage.getItem("prcodeid")},fun:function(t,e){}}},program_weather:{list:{facfun:"post_data_watch_page",t:1,send:{nowpage:0,listnum:30,curPage:"",wdate:""},pname:"工程温度",before:function(){config.port.program_weather.list.send.cityid=localStorage.getItem("cityid")},fun:function(t,e){}}},operate_user:{list:{facfun:"post_data_watch_page",t:1,send:{nowpage:0,listnum:30},pname:"用户统计信息"}},operate_logincount:{list:{facfun:"post_data_watch_page",t:1,send:{nowpage:0,listnum:30},pname:"用户登录统计"}},operate_usergather:{list:{facfun:"post_data_watch_page",t:1,send:{nowpage:0,listnum:500},pname:"用户汇总登录"}},operate_com:{list:{facfun:"post_data_watch_page",t:1,send:{nowpage:0,listnum:30},pname:"公司列表"}},operate_pro:{list:{facfun:"post_data_watch_page",t:1,send:{nowpage:0,listnum:30,pid:"",cityid:""},pname:"项目列表"}},system_city:{list:{facfun:"post_data_watch_page",t:0,send:{nowpage:0,listnum:30},pname:"城市管理列表"}},system_mattertpl:{del:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"原材模板-删除"},list:{facfun:"post_data_watch_page",t:1,send:{nowpage:0,listnum:300},pname:"原材模板管理列表"}},system_tbtype:{del:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"统表类型-删除"},list:{facfun:"post_data_watch_page",t:1,send:{nowpage:0,listnum:300},pname:"统表类型管理列表"}},system_tongbiao:{del:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"统表-删除"},list:{facfun:"post_data_watch_page",t:1,send:{nowpage:0,listnum:300},pname:"统表管理列表"},tplist:{facfun:"post_data",t:1,send:{nowpage:0,listnum:300},pname:"统表类型列表"}},service_weather:{list:{facfun:"post_data_watch_page",t:1,send:{nowpage:0,listnum:30,curPage:"",wdate:""},pname:"温度管理"},del:{method:"post",facfun:"post_data_watch",t:0,send:{},pname:"温度-删除"}},user_info:{list:{facfun:"post_data_watch",t:1,send:{},pname:"获取个人信息",fun:function(t,e){e.imgurl=t.data.photourl}}}},tip:{a1:"请输入用户名/手机号",a2:"用户名/手机号不少于6位数",a3:"请输入密码",a4:"密码不少于6位数",a5:"请输入手机号",a6:"手机号不少于6位数",a7:"手机号不少于6位数"},ext:{jichu:["桩芯","承台垫层","承台","基础梁垫层","基础梁","电梯基坑垫层","电梯基坑"],zhuti:["首","二","三","四","五","六","七","八","九","十","十一","十二","十三","十四","十五","十六","十七","十八","十九","二十","二十一","二十二","二十三","二十四","二十五","二十六","二十七","二十八","二十九","三十","三十一","三十二","三十三","三十四","三十五","三十六","三十七","三十八","三十九","四十","五十一","五十二","五十三","五十四","五十五","五十六","五十七","五十八","五十九","五十"]},typelist:[{title:"标养",ngclass:"label-primary",url:"main/html/program/part_by.html",t:"byornot"},{title:"同养",ngclass:"label-default",url:"main/html/program/part_ty.html",t:"tyornot"},{title:"抗渗",ngclass:"label-default",url:"main/html/program/part_ks.html",t:"ksornot"},{title:"柱头",ngclass:"label-default",url:"main/html/program/part_zt.html",t:"ztornot"},{title:"拆模",ngclass:"label-default",url:"main/html/program/part_cm.html",t:"cmornot"},{title:"焊接",ngclass:"label-default",url:"main/html/program/part_dz.html",t:"dzornot"},{title:"砌筑",ngclass:"label-default",url:"main/html/program/part_qz.html",t:"qzornot"},{title:"内抹灰",ngclass:"label-default",url:"main/html/program/part_nq.html",t:"nqornot"},{title:"外抹灰",ngclass:"label-default",url:"main/html/program/part_wq.html",t:"wqornot"},{title:"找平",ngclass:"label-default",url:"main/html/program/part_zp.html",t:"zpornot"}],yctypelist:[{title:"钢筋",ngclass:"label-default",url:"main/html/program/part_gj.html",t:"1"},{title:"水泥",ngclass:"label-default",url:"main/html/program/part_sn.html",t:"2"},{title:"砂",ngclass:"label-default",url:"main/html/program/part_s.html",t:"3"},{title:"砖",ngclass:"label-default",url:"main/html/program/part_z.html",t:"4"},{title:"装饰",ngclass:"label-default",url:"main/html/program/part_zs.html",t:"5"},{title:"节能",ngclass:"label-default",url:"main/html/program/part_jn.html",t:"6"},{title:"防水",ngclass:"label-default",url:"main/html/program/part_fs.html",t:"7"},{title:"水电",ngclass:"label-default",url:"main/html/program/part_sd.html",t:"8"},{title:"安全",ngclass:"label-default",url:"main/html/program/part_aq.html",t:"9"},{title:"全部",ngclass:"label-primary",url:"main/html/program/part_qb.html",t:"0"}],ftypelist:[{title:"基础",t:"3"},{title:"主体",t:"4"},{title:"装修",t:"5"},{title:"幕墙",t:"6"},{title:"屋面",t:"7"},{title:"节能",t:"8"},{title:"给排水",t:"9"},{title:"电气",t:"10"}],qdypelist:[{title:"----",t:"0"},{title:"C10",t:"10"},{title:"C15",t:"15"},{title:"C20",t:"20"},{title:"C25",t:"25"},{title:"C30",t:"30"},{title:"C35",t:"35"},{title:"C40",t:"40"},{title:"C45",t:"45"},{title:"C50",t:"50"},{title:"C55",t:"55"},{title:"C60",t:"60"},{title:"C65",t:"65"},{title:"C70",t:"70"},{title:"C75",t:"75"},{title:"C80",t:"80"}],sjtypelist:[{title:"----",t:"0"},{title:"M5",t:"5"},{title:"M7.5",t:"7.5"},{title:"M10",t:"10"},{title:"M15",t:"15"},{title:"M20",t:"20"},{title:"M25",t:"25"},{title:"M30",t:"30"}],kstypelist:[{title:"----",t:"0"},{title:"P4",t:"P4"},{title:"P6",t:"P6"},{title:"P8",t:"P8"},{title:"P10",t:"P10"},{title:"P12",t:"P12"},{title:">P12",t:">P12"}]}}),window.root="api/ver1/",window.debugflag=0,define("confv",function(t,e,a){window.YSCONF={url:{getmenu:{url:"index/menutree_select",method:"post_data",name:"后台侧边栏"},com_update:{url:"index/com_editadd",method:"post_data_watch",name:"编辑更新一条"},com_list:{url:"index/com_list",method:"post_data_watch",name:"无分页列表"},com_list2:{url:"index/com_list",method:"post_data_watch",name:"无分页列表"},com_list3:{url:"index/com_list",method:"post_data_watch",name:"无分页列表"},com_list_page:{url:"index/com_list_page",method:"post_data_watch_page",name:"带分页列表"},com_list_page2:{url:"index/com_list_page",method:"post_data_watch_page",name:"带分页列表"},com_list_page3:{url:"index/com_list_page",method:"post_data_watch_page",name:"带分页列表"},com_artlist_page:{url:"index/com_artlist_page",method:"post_data_watch_page",name:"带分页列表"},com_detail:{url:"index/com_detail",method:"post_data_watch",name:"详情"},com_del:{url:"index/com_delete",method:"post_data_watch",name:"公共删除"},com_del2:{url:"index/com_delete",method:"post_data_watch",name:"公共删除"},com_del3:{url:"index/com_delete",method:"post_data_watch",name:"公共删除"},com_editadd:{url:"index/com_editadd",method:"post_data_watch",name:"编辑或增加"},com_editadd2:{url:"index/com_editadd",method:"post_data_watch",name:"编辑或增加"},com_editadd3:{url:"index/com_editadd",method:"post_data_watch",name:"编辑或增加"},com_editadd4:{url:"index/com_editadd",method:"post_data_watch",name:"编辑或增加"},com_editadd5:{url:"index/com_editadd",method:"post_data_watch",name:"编辑或增加"},lgout:{url:"base/logout",method:"post_data_watch",name:"推出登录"},admin_base_select:{url:"index/base_select",method:"post_data",name:"后台首页查询"}},win:{warmtips_teacher_set:{template:"warmtips_teacher_set",type:"add",title:"温馨提示",temdata:{}}}}}),define("facv",["jquery","angularjs","YS"],function(t,e,a){var o=angular.module("myfactv",[]);o.factory("facv",["$http",function(t){var e={time:function(t){var e=t?Date.parse(new Date(t)):Date.parse(new Date);return e},seturl:function(t,e){console.log({scope:t,name:YSCONF.url[e].name});var a=YSCONF.url[e].url;a=t[e].url?t[e].url:a;var o=window.root+a,n=t[e].params||{};if(window.debugflag)switch(n.debug){case 1:var i=n.debugkey?"/"+n.debugkey:"";o="json/"+a+i+".json";break;case 0:o="json/err.json";break;case-2:o="json/noauth.json";break;case-1:o="json/nologin.json"}var r={url:o,method:YSCONF.url[e].method};return r},ysfetch:function(t,a){if(t&&a){var o=e.seturl(t,a);e[o.method](t,a)}},get:function(a,o,n){var i=a+"?token="+e.getstore("ystoken");t({withCredentials:!0,method:"GET",params:$.param(o),url:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(t,e,a,o){n(t)}).error(function(t,e,a,o){YS("layer",function(){layer.msg("网络超时！",{icon:0,time:2e3})})})},post:function(a,o,n){var i=a+"?token="+e.getstore("ystoken");t({method:"POST",data:$.param(o),url:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(t,e,a,o){n(t)}).error(function(t,e,a,o){YS("layer",function(){layer.msg("网络超时！",{icon:0,time:2e3})})})},load:function(t){t?$("#loader").fadeIn(100):$("#loader").fadeOut(1e3)},getcode:function(){return $("#codeid").val()},get_data_watch:function(t,a){t&&a&&t.$watch(a+".time",function(){if(t[a].time){if("function"==typeof t[a].before){var o=t[a].before(t);if(o===!1)return!1}var n=t[a].params||{};YSCONF.url[a].load&&e.load(0);var i=e.seturl(t,a);e.get(i.url,n,function(o){t[a].data={},1==o.code&&(t[a].data=o.data),"function"==typeof t[a].done&&t[a].done(o,t),YSCONF.url[a].load&&e.load(0)})}},!0)},get_data_watch_page:function(t,a){if(t&&a){var o=YSCONF.url[a].pageid||"page";t.$watch(a+".time",function(){if(t[a].time){if("function"==typeof t[a].before){var n=t[a].before(t);if(n===!1)return!1}var i=t[a].params||{};YSCONF.url[a].load&&e.load(1);var r=e.seturl(t,a);e.get(r.url,i,function(n){t[a].data={},1==n.code&&(t[a].data=n.data,laypage({cont:o,pages:n.data.pages,skin:"molv",first:1,curr:t[a].params.curPage||1,prev:"<",next:">",jump:function(o,n){n||(t[a].params.curPage=o.curr,t[a].time=e.time(),t.$apply())}})),"function"==typeof t[a].done&&t[a].done(n,t),YSCONF.url[a].load&&e.load(0)})}},!0)}},get_data:function(t,a){if(t&&a){if("function"==typeof t[a].before){var o=t[a].before(t);if(o===!1)return!1}var n=t[a].params||{};YSCONF.url[a].load&&e.load(1);var i=e.seturl(t,a);e.get(i.url,n,function(o){t[a].data={},1==o.code&&(t[a].data=o.data),"function"==typeof t[a].done&&t[a].done(o,t),YSCONF.url[a].load&&e.load(0)})}},post_data_watch:function(t,a){t&&a&&t.$watch(a+".time",function(){if(t[a].time){if("function"==typeof t[a].before){var o=t[a].before(t);if(o===!1)return!1}var n=t[a].params||{};YSCONF.url[a].load&&e.load(1);var i=e.seturl(t,a);e.post(i.url,n,function(o){t[a].data={},1==o.code&&(t[a].data=o.data),"function"==typeof t[a].done&&t[a].done(o,t),YSCONF.url[a].load&&e.load(0)})}},!0)},post_data:function(t,a){if(t&&a){if("function"==typeof t[a].before){var o=t[a].before(t);if(o===!1)return!1}var n=t[a].params||{};YSCONF.url[a].load&&e.load(1);var i=e.seturl(t,a);e.post(i.url,n,function(o){t[a].data={},1==o.code&&(t[a].data=o.data),"function"==typeof t[a].done&&t[a].done(o,t),YSCONF.url[a].load&&e.load(0)})}},post_data_watch_page:function(t,a){if(t&&a){var o=YSCONF.url[a].pageid||"page";t.$watch(a+".time",function(){if(t[a].time){if("function"==typeof t[a].before){var n=t[a].before(t);if(n===!1)return!1}var i=t[a].params||{};YSCONF.url[a].load&&e.load(1);var r=e.seturl(t,a);e.post(r.url,i,function(n){t[a].data={},1==n.code&&(t[a].data=n.data,laypage({cont:o,pages:n.data.pages,skin:"molv",first:1,curr:t[a].params.curPage||1,prev:"<",next:">",jump:function(o,n){n||(t[a].params.curPage=o.curr,t[a].time=e.time(),t.$apply())}})),"function"==typeof t[a].done&&t[a].done(n,t),YSCONF.url[a].load&&e.load(0)})}},!0)}},getscope_byid:function(t,a){return t.$id==a?t:e.getscope_byid(t.$parent,a)},getcd:function(t,a){var o=e.getscope_byid(t,2);return o.cd[a]},setstore:function(t,e){return e="object"==typeof e?JSON.stringify(e):e,localStorage.setItem(t,e),!0},getstore:function(t){var e="";try{e=localStorage.getItem(t),e=JSON.parse(e)}catch(a){e=localStorage.getItem(t)}return e},unsetstore:function(t){return localStorage.removeItem(t),!0},getObjectURL:function(t){var e=null;return void 0!==window.createObjectURL?e=window.createObjectURL(t):void 0!==window.URL?e=window.URL.createObjectURL(t):void 0!==window.webkitURL&&(e=window.webkitURL.createObjectURL(t)),e},dogoto:function(t,e){layer.msg(t.msg),1==t.code&&setTimeout(function(){window.location.href=e},1e3)},setCookie:function(t,e){var a=new Date;a.setTime(a.getTime()+6048e5);var o="expires="+a.toUTCString();document.cookie=t+"="+e+"; "+o},getCookie:function(t){for(var e=t+"=",a=document.cookie.split(";"),o=0;o<a.length;o++){for(var n=a[o];" "==n.charAt(0);)n=n.substring(1);if(n.indexOf(e)!=-1)return n.substring(e.length,n.length)}return""},delCookie:function(t){e.setCookie(t,"",-1)},webupload:function(t,e,a,o,n){YS("webuploader",function(){var a=WebUploader.create({resize:!1,swf:"YS-frame/webuploader/0.1.5/Uploader.swf",server:window.root+"base/upload",pick:"#picker",chunked:!0,chunkSize:2097152,auto:!0});a.on("uploadBeforeSend",function(t,e,a){$.extend(a,{Origin:"http://api.yushan.com","Access-Control-Request-Method":"POST"})}),a.on("fileQueued",function(e){t.append('<div id="'+e.id+'" class="item"><h4 class="info">'+e.name+'</h4><p class="state">等待上传...</p></div>')}),a.on("uploadProgress",function(t,e,a){var o=$("#"+t.id),n=o.find(".progress .progress-bar");n.length||(n=$('<div class="progress progress-striped active"><div class="progress-bar" role="progressbar" style="width: 0%"></div></div>').appendTo(o).find(".progress-bar")),o.find("p.state").text("上传中"),n.css("width",100*e+"%")}),a.on("uploadSuccess",function(t,e){console.log(e),1==e.code?(e.url=e.url.replace(/\\/g,"/"),o[n]=e.url):layer.msg(e.msg),$("#"+t.id).find("p.state").text("已上传")}),a.on("uploadError",function(t){$("#"+t.id).find("p.state").text("上传出错")}),a.on("uploadComplete",function(t){$("#"+t.id).find(".progress").fadeOut()}),a.on("fileQueued",function(t){var e=$("#fileList"),o=$('<div id="'+t.id+'" class="file-item thumbnail"><img><div class="info">'+t.name+"</div></div>"),n=o.find("img");$("#fileList").html(""),e.append(o),a.makeThumb(t,function(t,e){return t?void n.replaceWith("<span>不能预览</span>"):void n.attr("src",e)},100,100)}),e.on("click",function(){return!$(this).hasClass("disabled")&&void a.upload()})})},hashtoobj:function(t){var e={};if(t)if(t.indexOf("&")>0){var a=t.split("&");a.map(function(t){var a=t.split("=");a.length>1&&(e[a[0]]=a[1])})}else{var o=t.split("=");o.length>1&&(e[o[0]]=o[1])}return e}};return e}])}),define("fac",["jquery","angularjs","YS"],function(t,e,a){var o=angular.module("myfact",[]);o.factory("fac",["$http",function(t){var e={chklogin:function(t,e){e.code===-1?(YS("layer",function(){layer.msg("请重新登陆！",{icon:0})}),setTimeout(function(){window.location.href="./login.html"},1e3)):t(e)},get:function(a,o,n){t({method:"GET",params:o,url:a}).success(function(t,a,o,i){e.chklogin(n,t)}).error(function(t,e,a,o){YS("layer",function(){layer.msg("网络超时！",{icon:0,time:2e3})})})},post:function(a,o,n){t({method:"POST",data:o,url:a}).success(function(t,a,o,i){e.chklogin(n,t)}).error(function(t,e,a,o){YS("layer",function(){layer.msg("网络超时！",{icon:0,time:2e3})})})},coverobj:function(t,e,a){for(var o in e)!e.hasOwnProperty(o)||t.hasOwnProperty(o)&&!a||(t[o]=e[o]);return t},trim:function(t,e){var a=t.replace(/(^\s+)|(\s+$)/g,""),o="g"==e.toLowerCase()?a.replace(/\s/g,""):a;return o},setCookie:function(t,e){var a=new Date;a.setTime(a.getTime()+6048e5);var o="expires="+a.toUTCString();document.cookie=t+"="+e+"; "+o},getCookie:function(t){for(var e=t+"=",a=document.cookie.split(";"),o=0;o<a.length;o++){for(var n=a[o];" "==n.charAt(0);)n=n.substring(1);if(n.indexOf(e)!=-1)return n.substring(e.length,n.length)}return""},delCookie:function(t){e.setCookie(t,"",-1)},numtotime:function(t){var e="";if(parseInt(t)>0){var a=new Date(t),o=a.getYear()+1900,n=a.getMonth()+1;n=n<10?"0"+n:n;var i=a.getDate();return i=i<10?"0"+i:i,o+"-"+n+"-"+i}return e},getDatezh:function(t){var e=new Date(parseInt(t)).toLocaleString();return e},getDateen:function(t){if(0===t)return"";
var e=new Date(parseInt(t)).toLocaleString().replace(/年|月/g,"-").replace(/日/g," ");return e},time:function(t){return t?new Date(t).valueOf():(new Date).valueOf()},seturl:function(t){var e=config.url[t].url,a=e.split("/").length,o="root"+a,n=window[o]+e,i=t+"Data",r=t+"Fun",c=t+"Time",l={url:n,dkey:i,fkey:r,tkey:c,load:config.url[t].load};return l},get_data_watch:function(t,a){if(t&&a){var o=e.seturl(a),n=o.tkey;t.$watch(n,function(){t[n].time&&(e.load(1),e.get(o.url,t[o.dkey],function(n){console.log({aurl:a,respone:n}),t[a]={},"1"==n.code&&(t[a]=n.data),"function"==typeof t[o.fkey]&&t[o.fkey](n,t),e.load(0)}))},!0)}},get_data_watch_page:function(t,a){if(t&&a){var o=e.seturl(a),n=config.url[a].pageid||"page",i=o.tkey;t.$watch(i,function(){t[i].time&&(o.load&&e.load(1),e.get(o.url,t[o.dkey],function(r){console.log({aurl:a,respone:r}),t[a]={},"1"==r.code&&(t[a]=r.data,laypage({cont:n,pages:r.data.pages,skin:"molv",first:1,curr:t[o.dkey].nowpage||1,prev:"<",next:">",jump:function(a,n){n||(t[o.dkey].nowpage=a.curr,t[i].time=e.time(),t.$apply())}})),"function"==typeof t[o.fkey]&&t[o.fkey](r,t),o.load&&e.load(0)}))},!0)}},get_data:function(t,a){if(t&&a){var o=e.seturl(a);o.load&&e.load(1),e.get(o.url,t[o.dkey],function(n){console.log({aurl:a,respone:n}),t[a]={},"1"==n.code&&(t[a]=n.data),"function"==typeof t[o.fkey]&&t[o.fkey](n,t),o.load&&e.load(0)})}},post_data_watch:function(t,a){if(t&&a){var o=e.seturl(a),n=o.tkey;t.$watch(n,function(){t[n].time&&(o.load&&e.load(1),e.post(o.url,t[o.dkey],function(n){console.log({aurl:a,respone:n}),t[a]={},"1"==n.code&&(t[a]=n.data),"function"==typeof t[o.fkey]&&t[o.fkey](n,t),o.load&&e.load(0)}))},!0)}},post_data_watch_page:function(t,a){if(t&&a){var o=e.seturl(a),n=config.url[a].pageid||"page",i=o.tkey;t.$watch(i,function(){t[i].time&&(o.load&&e.load(1),e.post(o.url,t[o.dkey],function(r){console.log({aurl:a,respone:r}),t[a]={},"1"==r.code&&(t[a]=r.data,laypage({cont:n,pages:r.data.pages,skin:"molv",first:1,curr:t[o.dkey].nowpage||1,prev:"<",next:">",jump:function(a,n){n||(t[o.dkey].nowpage=a.curr,t[i].time=e.time(),t.$apply())}})),"function"==typeof t[o.fkey]&&t[o.fkey](r,t),o.load&&e.load(0)}))},!0)}},post_data:function(t,a){if(t&&a){var o=e.seturl(a);o.load&&e.load(1),e.post(o.url,t[o.dkey],function(n){console.log({aurl:a,respone:n}),t[a]={},"1"==n.code&&(t[a]=n.data),"function"==typeof t[o.fkey]&&t[o.fkey](n,t),o.load&&e.load(0)})}},lmsg:function(t){var e=1==t.code?1:2;YS("layer",function(){layer.msg(t.msg,{icon:e})})},msg:function(t){var e=1==t.code?"success":"error";YS("toastr",function(){toastr.options={closeButton:!0,debug:!1,positionClass:"toast-bottom-right",onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"2000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},toastr[e](t.msg)})},getscope_byid:function(t,a){return t.$id==a?t:e.getscope_byid(t.$parent,a)},preview:function(t,e){var a=document.getElementById(e);if(t.files&&t.files[0]){var o=new FileReader;o.onload=function(t){a.innerHTML='<img src="'+t.target.result+'" />'},o.readAsDataURL(t.files[0])}else a.innerHTML='<div class="img" style="filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src=\''+t.value+"'\"></div>"},getrandom:function(t,e){var a=e-t,o=Math.random();return t+Math.round(o*a)},load:function(t){var e=$("#loader");t?e.fadeIn(100):e.fadeOut(500)},checklogin:function(t){2006==t.code&&(layer.msg(t.msg+",2秒后跳转登录页面；"),setTimeout(function(){window.location.href="login.html"},2e3))},setstore:function(t,e){return e="object"==typeof e?JSON.stringify(e):e,localStorage.setItem(t,e),!0},getstore:function(t){var e="";try{e=localStorage.getItem(t),e=JSON.parse(e)}catch(a){e=localStorage.getItem(t)}return e},unsetstore:function(t){return localStorage.removeItem(t),!0},addmsg:function(t,e,a){1==e.code?(layer.closeAll(),layer.msg(e.msg,{icon:1}),t.temdata.codeid=e.data.codeid,t[a].datalist.unshift(t.temdata)):layer.msg(e.msg,{icon:2})},testphone:function(t){var e=/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1})|(17[0-9]{1})|145|147|159|153)+\d{8})$/;return!!e.test(t)},check:function(t,e,a){YS("validate",function(){$.validator.addMethod("ismobile",function(t,e){var a=t.length,o=/^(13[0-9]{9})|(18[0-9]{9})|(14[0-9]{9})|(17[0-9]{9})|(15[0-9]{9})$/;return this.optional(e)||11==a&&o.test(t)},"请正确填写您的手机号码"),$.validator.setDefaults({submitHandler:a}),$(t).validate(e)})},checkx:function(t,e){YS("validationEngine",function(){$(t).validationEngine({custom_error_messages:e})})},disb:function(t,e){var a=e||2e3;t.prop("disabled",!0),setTimeout(function(){t.prop("disabled",!1)},a)},sendphone:function(t){var e=59;t.attr("disabled","true").css("opacity",.7);var a=setInterval(function(){return 0===e?(t.val("发送验证码"),t.removeAttr("disabled").css("opacity",1),clearInterval(a),!1):(t.val(""+e+"秒重发"),void e--)},1e3)},yzm:function(){for(var t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],e="",a=0;a<4;a++)e+=""+t[Math.floor(Math.random()*t.length)];return e},winprove:function(t,e,a){var o=JSON.stringify(t);o=o.replace(/{/,""),o=o.replace(/}/,""),o=o.replace(/"/g,"");for(var n=o.split(","),i=0;i<n.length;i++){var r=n[i].split(":");if(""===r[1]){if(!a)return layer.msg(e[i]+"未填写"),!1;for(var c=0,l=0;l<a.length;l++)r[0]==a[l]&&c++;if(0===c)return layer.msg(e[i]+"未填写"),!1}}},isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},monlastday:function(t){var a="";if(parseInt(t)>0){var o=new Date(1e3*t),n=o.getYear()+1900,i=o.getMonth()+1;i=i<10?"0"+i:i,o=o.getDate(),o=o<10?"0"+o:o,ymd=n+"-"+i+"-"+o;var r=e.getyuemo(ymd);return console.log(n+"-"+i+"-"+r),n+"-"+i+"-"+r}return a},getmonthcn:function(t){var e="";if(parseInt(t)>0){var a=new Date(1e3*t),o=a.getYear()+1900,n=a.getMonth()+1;return n=n<10?"0"+n:n,a=a.getDate(),a=a<10?"0"+a:a,o+"年"+n+"月"}return e},getyuemo:function(t){var a=[];return a=t.split("-"),a[1]=parseInt(a[1]),1==a[1]||3==a[1]||5==a[1]||7==a[1]||8==a[1]||10==a[1]||12==a[1]?"31":4==a[1]||6==a[1]||9==a[1]||11==a[1]?"30":e.isLeapYear(a[0])?"29":"28"},getNextMonth:function(t){var e=t.split("-"),a=e[0],o=e[1],n=e[2],i=new Date(a,o,0);i=i.getDate();var r=a,c=parseInt(o)+1;13==c&&(r=parseInt(r)+1,c=1);var l=n,d=new Date(r,c,0);d=d.getDate(),l>d&&(l=d),c<10&&(c="0"+c);var s=r+"-"+c+"-"+l;return s},getMonths:function(t,e){t=t.split("-"),e=e.split("-");var a=parseInt(t[0]);return month1=parseInt(t[1]),year2=parseInt(e[0]),month2=parseInt(e[1]),months=12*(year2-a)+(month2-month1)+1,months},monfirstday:function(t){var e="";if(parseInt(t)>0){var a=new Date(1e3*t),o=a.getYear()+1900,n=a.getMonth()+1;return n=n<10?"0"+n:n,a=a.getDate(),a=a<10?"0"+a:a,console.log(o+"-"+n+"-01"),o+"-"+n+"-01"}return e},timetostr:function(t){var e=t.split("-"),a=parseInt(e[0],10),o=parseInt(e[1],10)-1,n=parseInt(e[2],10),i=new Date(a,o,n);return i.getTime()},strtotime:function(t){var e="";if(parseInt(t)>0){var a=new Date(1e3*t),o=a.getYear()+1900,n=a.getMonth()+1;return n=n<10?"0"+n:n,a=a.getDate(),a=a<10?"0"+a:a,o+"-"+n+"-"+a}return e},getObjectURL:function(t){var e=null;return void 0!==window.createObjectURL?e=window.createObjectURL(t):void 0!==window.URL?e=window.URL.createObjectURL(t):void 0!==window.webkitURL&&(e=window.webkitURL.createObjectURL(t)),e},GetQueryString:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(e);return null!==a?decodeURI(a[2]):""},MD5:function(t){function e(t,e){return t<<e|t>>>32-e}function a(t,e){var a,o,n,i,r;return n=2147483648&t,i=2147483648&e,a=1073741824&t,o=1073741824&e,r=(1073741823&t)+(1073741823&e),a&o?2147483648^r^n^i:a|o?1073741824&r?3221225472^r^n^i:1073741824^r^n^i:r^n^i}function o(t,e,a){return t&e|~t&a}function n(t,e,a){return t&a|e&~a}function i(t,e,a){return t^e^a}function r(t,e,a){return e^(t|~a)}function c(t,n,i,r,c,l,d){return t=a(t,a(a(o(n,i,r),c),d)),a(e(t,l),n)}function l(t,o,i,r,c,l,d){return t=a(t,a(a(n(o,i,r),c),d)),a(e(t,l),o)}function d(t,o,n,r,c,l,d){return t=a(t,a(a(i(o,n,r),c),d)),a(e(t,l),o)}function s(t,o,n,i,c,l,d){return t=a(t,a(a(r(o,n,i),c),d)),a(e(t,l),o)}function m(t){for(var e,a=t.length,o=a+8,n=(o-o%64)/64,i=16*(n+1),r=Array(i-1),c=0,l=0;l<a;)e=(l-l%4)/4,c=l%4*8,r[e]=r[e]|t.charCodeAt(l)<<c,l++;return e=(l-l%4)/4,c=l%4*8,r[e]=r[e]|128<<c,r[i-2]=a<<3,r[i-1]=a>>>29,r}function u(t){var e,a,o="",n="";for(a=0;a<=3;a++)e=t>>>8*a&255,n="0"+e.toString(16),o+=n.substr(n.length-2,2);return o}var p,f,g,_,y,h,v,w,b,k=Array(),$=7,x=12,I=17,D=22,j=5,C=9,S=14,T=20,z=4,M=11,O=16,R=23,Y=6,E=10,L=15,q=21;for(k=m(t),h=1732584193,v=4023233417,w=2562383102,b=271733878,p=0;p<k.length;p+=16)f=h,g=v,_=w,y=b,h=c(h,v,w,b,k[p+0],$,3614090360),b=c(b,h,v,w,k[p+1],x,3905402710),w=c(w,b,h,v,k[p+2],I,606105819),v=c(v,w,b,h,k[p+3],D,3250441966),h=c(h,v,w,b,k[p+4],$,4118548399),b=c(b,h,v,w,k[p+5],x,1200080426),w=c(w,b,h,v,k[p+6],I,2821735955),v=c(v,w,b,h,k[p+7],D,4249261313),h=c(h,v,w,b,k[p+8],$,1770035416),b=c(b,h,v,w,k[p+9],x,2336552879),w=c(w,b,h,v,k[p+10],I,4294925233),v=c(v,w,b,h,k[p+11],D,2304563134),h=c(h,v,w,b,k[p+12],$,1804603682),b=c(b,h,v,w,k[p+13],x,4254626195),w=c(w,b,h,v,k[p+14],I,2792965006),v=c(v,w,b,h,k[p+15],D,1236535329),h=l(h,v,w,b,k[p+1],j,4129170786),b=l(b,h,v,w,k[p+6],C,3225465664),w=l(w,b,h,v,k[p+11],S,643717713),v=l(v,w,b,h,k[p+0],T,3921069994),h=l(h,v,w,b,k[p+5],j,3593408605),b=l(b,h,v,w,k[p+10],C,38016083),w=l(w,b,h,v,k[p+15],S,3634488961),v=l(v,w,b,h,k[p+4],T,3889429448),h=l(h,v,w,b,k[p+9],j,568446438),b=l(b,h,v,w,k[p+14],C,3275163606),w=l(w,b,h,v,k[p+3],S,4107603335),v=l(v,w,b,h,k[p+8],T,1163531501),h=l(h,v,w,b,k[p+13],j,2850285829),b=l(b,h,v,w,k[p+2],C,4243563512),w=l(w,b,h,v,k[p+7],S,1735328473),v=l(v,w,b,h,k[p+12],T,2368359562),h=d(h,v,w,b,k[p+5],z,4294588738),b=d(b,h,v,w,k[p+8],M,2272392833),w=d(w,b,h,v,k[p+11],O,1839030562),v=d(v,w,b,h,k[p+14],R,4259657740),h=d(h,v,w,b,k[p+1],z,2763975236),b=d(b,h,v,w,k[p+4],M,1272893353),w=d(w,b,h,v,k[p+7],O,4139469664),v=d(v,w,b,h,k[p+10],R,3200236656),h=d(h,v,w,b,k[p+13],z,681279174),b=d(b,h,v,w,k[p+0],M,3936430074),w=d(w,b,h,v,k[p+3],O,3572445317),v=d(v,w,b,h,k[p+6],R,76029189),h=d(h,v,w,b,k[p+9],z,3654602809),b=d(b,h,v,w,k[p+12],M,3873151461),w=d(w,b,h,v,k[p+15],O,530742520),v=d(v,w,b,h,k[p+2],R,3299628645),h=s(h,v,w,b,k[p+0],Y,4096336452),b=s(b,h,v,w,k[p+7],E,1126891415),w=s(w,b,h,v,k[p+14],L,2878612391),v=s(v,w,b,h,k[p+5],q,4237533241),h=s(h,v,w,b,k[p+12],Y,1700485571),b=s(b,h,v,w,k[p+3],E,2399980690),w=s(w,b,h,v,k[p+10],L,4293915773),v=s(v,w,b,h,k[p+1],q,2240044497),h=s(h,v,w,b,k[p+8],Y,1873313359),b=s(b,h,v,w,k[p+15],E,4264355552),w=s(w,b,h,v,k[p+6],L,2734768916),v=s(v,w,b,h,k[p+13],q,1309151649),h=s(h,v,w,b,k[p+4],Y,4149444226),b=s(b,h,v,w,k[p+11],E,3174756917),w=s(w,b,h,v,k[p+2],L,718787259),v=s(v,w,b,h,k[p+9],q,3951481745),h=a(h,f),v=a(v,g),w=a(w,_),b=a(b,y);var N=u(h)+u(v)+u(w)+u(b);return N.toLowerCase()}};return e}])}),define("main",["jquery","angularjs"],function(require,exports,module){var myctrl=angular.module("main",["RongWebIMWidget"]);myctrl.filter("htmlfil",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}]),myctrl.filter("myfil",["fac",function(t){return function(t,e){var a=[];return angular.forEach(t,function(t,o){t.pid==e&&a.push(t)}),a}}]),myctrl.filter("planfil",["fac",function(t){return function(t,e){var a=[],o=e+"ornot";return angular.forEach(t,function(t,e){"1"==t[o]&&a.push(t)}),a}}]),myctrl.filter("workfil",["fac",function(t){return function(t,e){var a=[];return"0"==e||"3"==e?t:"1"==e?(angular.forEach(t,function(t,e){"3"==t.fid&&a.push(t)}),a):"2"==e?(angular.forEach(t,function(t,e){"3"!=t.fid&&a.push(t)}),a):void 0}}]),myctrl.controller("main_ctrl",["$scope","fac",function($scope,fac){function setmenu(t,e,a){var o=e.split("#")[1];o=void 0===o?"/program/pro":o,$scope.nowtab=o;for(var n=document.querySelectorAll(".navone>a"),i=0;i<n.length;i++)n[$scope.tabcount].className="";switch(o){case"/program/sinlist":$scope.tabcount=0,$("#ptap").removeClass("dpn");break;case"/program/weather":$scope.tabcount=1,$("#ptap").removeClass("dpn");break;case"/program/gantt":$scope.tabcount=2,$("#ptap").removeClass("dpn");break;case"/program/gether":$scope.tabcount=3,$("#ptap").removeClass("dpn");break;case"/program/struct":$scope.tabcount=4,$("#ptap").removeClass("dpn");break;case"/program/base":$scope.tabcount=5,$("#ptap").removeClass("dpn");break;case"/program/work":$("#ptap").removeClass("dpn");break;case"/program/plan":$("#ptap").removeClass("dpn")}var r=document.querySelectorAll("#prottab .border")[0];if(r.style.left=150*$scope.tabcount+"px",n[$scope.tabcount].className="cAvi",o){var c=o.split("/")[1],l=o.split("/")[2],d="",s="",m="";angular.forEach(t.ysmenu_list,function(e,a){e.tap==c?(e.now="active",s=e.title,t.maper.topurl=c+"/"+e.chl[0].tap,console.log(t.maper.topurl)):e.now="",l?(angular.forEach(e.chl,function(t,e){t.tap==l?(t.now="active",m=t.title):t.now=""}),d=l):e.tap==c&&(angular.forEach(e.chl,function(t,e){t.now=""}),e.chl[0].now="active",d=e.chl[0].tap,m=e.chl[0].title)}),t.win.url="",t.body.url="./main/html/"+c+"/"+d+".html",t.maper.one=s,t.maper.oneurl=c,t.maper.two=m,t.maper.twourl=l;var u=fac.getstore("prname");t.maper.prname=u?u:"",console.log(t.maper);1==a?t.$apply():""}}$scope.proinfo=fac.getstore("proinfo")||{},$scope.win={url:"",portkey:"",extendone:"",extendtwo:"",extendthree:"",extname:""},$scope.maper={one:"",oneurl:"",two:"",twourl:"",topurl:""},$scope.litsave=0,$scope.isshow="1",$scope.showtype="0",$scope.lsshow="1",$scope.winpop={url:"",datalist:""},$scope.zllistdata={list:[],name:"",id:"",t:"",zf:""},$scope.typelist=config.typelist,$scope.yctypelist=config.yctypelist,$scope.ftypelist=config.ftypelist,$scope.qdypelist=config.qdypelist,$scope.sjtypelist=config.sjtypelist,$scope.kstypelist=config.kstypelist,YS("form"),YS("shCircleLoader",function(){$("#loader").shCircleLoader({color:"#2AA2D4"})}),YS("laypage"),YS("bootstrap"),YS("layer"),setTimeout(function(){YS("getLodop")},2e3),setTimeout(function(){YS("laydate",{},"molv")},1e3),YS("tableExport"),$scope.body={url:"",zlurl:"",tableurl:""},window.onhashchange=function(){setmenu($scope,location.href,1)},$scope.com_logoutFun=function(t,e){1==t.code&&(layer.msg("退出成功",{icon:1}),setTimeout(function(){window.location.href="./login.html"},1e3))},$scope.com_logoutTime={time:0,def:0},fac.post_data_watch($scope,"com_logout"),$scope.com_provinceTime={time:0,def:1},fac.post_data($scope,"com_province"),$scope.com_cityData={pid:""},$scope.com_cityTime={time:0,def:0},fac.post_data_watch($scope,"com_city"),$scope.ysmenu_listTime={time:0,def:1},$scope.ysmenu_listFun=function(t){setmenu($scope,location.href,0)},fac.post_data($scope,"ysmenu_list"),$scope.com_infoFun=function(re,sco){setTimeout(function(){with(window._bd_share_config={common:{onBeforeClick:function(t,e){},onAfterClick:function(t){$scope.com_shareData={type:t},$scope.com_shareTime.time=fac.time(),$scope.$apply()}},share:[{tag:"share_1",bdSize:24,bdText:"河狸建筑工程信息化平台,集成功能：送检计划，送检汇总，进度管理，漏送统计及提示，送检异常统计，城市温度采集，同养温度计算及累计，形象进度图，横道图，资料打印等功能。手机微信关注：河狸建筑，让你随时随地了解现场及送检进度",bdDesc:"河狸建筑工程信息化平台,集成功能：送检计划，送检汇总，进度管理，漏送统计及提示，送检异常统计，城市温度采集，同养温度计算及累计，形象进度图，横道图，资料打印等功能。手机微信关注：河狸建筑，让你随时随地了解现场及送检进度",bdUrl:"http://www.ysjianzhu.com/index.html?from="+re.data.tuijian+"&a=123",bdPic:"http://www.ysjianzhu.com/images/ysshare.jpg"}]},document)(0)[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion="+~(-new Date/36e5)]},1e3)},fac.get_data($scope,"com_info"),$scope.com_shareData={type:""},$scope.com_shareTime={time:0,def:0},fac.post_data_watch($scope,"com_share"),$scope.com_feedData={content:"",qq:""},$scope.com_feedTime={time:0,def:0},fac.post_data_watch($scope,"com_feed"),$scope.com_wenduData={codeid:""},$scope.com_wenduTime={time:0,def:0},fac.post_data_watch($scope,"com_wendu"),$scope.nowtab="",$scope.tabcount=1,$scope.winTime={time:""},$scope.$watch("winTime",function(){$scope.winTime.time&&($scope.win.url="./main/html/win/"+window.config.win[$scope.win.portkey].template+".html?time="+fac.time())},!0),$scope.winData={},$scope.winready=function(){var t=$scope.win.extname?$scope.win.extname+"-":"",e=t+window.config.win[$scope.win.portkey].title,a=$(".winbody").attr("w"),o=$(".winbody").attr("h"),n=$(".winbody").attr("late");n=n?n:100,setTimeout(function(){layer.open({type:1,title:e,shadeClose:!0,skin:"layui-layer-lan",area:[a,o],content:$("#win")})},n)},$scope.store=function(t){return fac.getstore(t)},$scope.lq=function(t,e){var a="";return t&&e&&(a=(fac.time(e)-fac.time(t))/1e3/86400),a},$scope.dqlq=function(t){var e="";return t&&(e=(fac.time()-fac.time(t))/1e3/86400),parseInt(e)},$scope.slq=function(t,e,a){var o=1==a?fac.time(e):fac.time(),n=parseInt((o-fac.time(t))/864e5);return n+="天"},$scope.hei=function(t,e){var a=0,o=0;if(t)return angular.forEach(t,function(t){3==t.fid&&(a+=1),4==t.fid&&(o+=1)}),1==e?40*a:2==e?40*o:0==e?40*t.length:void 0},$scope.tystl=function(t,e){var a=0,o="当前累计温度";return t>=560&&t<=600&&(a=1,o="温度即将到达600℃，请留意送检"),0==e&&t>600&&(a=2,o="规范要求同养温度必须达到600℃"),1==e&&t<600&&(a=2,o="部位温度超过600℃，还未送检，请及时送检"),{str:o,stl:a}},$scope.part=function(t){var e=$scope.ftypelist,a=[];return e.map(function(e){t.map(function(t){t==e.t&&a.push(e.title)})}),a.join(",")},$(window).on("scroll",function(){$("#yctip")&&($("body").scrollTop()>100&&"none"==$("#yctip").css("display")&&$("#yctip").fadeIn(300),$("body").scrollTop()<100&&"none"!=$("#yctip").css("display")&&$("#yctip").fadeOut(300)),$("#sjtip")&&($("body").scrollTop()>100&&"none"==$("#sjtip").css("display")&&$("#sjtip").fadeIn(300),$("body").scrollTop()<100&&"none"!=$("#sjtip").css("display")&&$("#sjtip").fadeOut(300))})}]),myctrl.controller("login_ctrl",["$scope","fac",function(t,e){YS("layer"),YS("form");var a=new Date;t.nowyear=a.getFullYear(),t.nowmouth=a.getMonth()+1,t.nowdate=a.getDate()<10?0+a.getDate():a.getDate(),$.ajax({type:"post",url:"http://pre.ysjianzhu.com/api/ver1/open",async:!1,success:function(e){"多云"==e.data.type?t.nowweather="cloud":t.nowweather="rain"}}),t.from={status:e.getstore("from"),code:e.getstore("from")},console.log(t.fromCode),e.get_data(t,"com_request"),t.regdata={tel:"",yzmcode:""},t.resetdata={tel:"",yzmcode:""},t.regbinddata={tel:"",yzmcode:""},t.temdata={tap:0,nickname:""};var o=e.GetQueryString("tap");o&&(t.temdata.tap=o),t.temdata.nickname=e.GetQueryString("nickname"),setTimeout(function(){var t=e.getstore("uinfo");t&&($("#ysusername").val(t.u),$("#yspassword").val(t.p),$("#yspassword").next().val(t.p2),$("#rem").prop("checked",!0))},300),0==t.temdata.tap&&e.check("#logform",{messages:{ysusername:{required:"请输入用户名/手机号",minlength:"用户名/手机号不少于6位数"},yspassword:{required:"请输入密码",minlength:"密码不少于6位数"}}},function(){e.disb($("#loginbtn")),$("#logform").ajaxSubmit({success:function(t){if(1==t.code){var a=$("#rem").is(":checked"),o={u:$("#ysusername").val(),p:$("#yspassword").val(),p2:$("#yspassword").next().val()};a?e.setstore("uinfo",o):e.unsetstore("uinfo");window.location.href="/main.html#/program/pro"}else layer.msg(t.msg,{icon:0})},error:function(t){layer.msg("链接超时",{icon:0})}})}),1==t.temdata.tap&&e.check("#regform",{rules:{tel:{ismobile:!0,remote:{url:"/api/ver1/Login/checkphone",type:"post",dataType:"json",dataFilter:function(t){var e="true"!=t;return $("#sendcode").prop("disabled",!e),e}}}},messages:{tel:{required:"请输入手机号",minlength:"确认手机不能小于11个字符",ismobile:"请输入有效的手机号码",remote:"该手机已被注册，请重新输入或直接登录"},yzmcode:{required:"请输入验证码"},msgcode:{required:"请输入手机验证码",digits:"验证码必须是数字",minlength:"验证码不少于4位"},regpsd:{required:"请输入密码",minlength:"密码不少于6个字符"}}},function(){e.disb($("#regbtn")),$("#regform").ajaxSubmit({success:function(t){1==t.code?(layer.msg(t.msg,{icon:1}),setTimeout(function(){window.location.href="/main.html#/program/pro"},1e3)):layer.msg(t.msg,{icon:0})}})}),2==t.temdata.tap&&e.check("#reform",{rules:{tel:{ismobile:!0,remote:{url:"/api/ver1/Login/checkphone",type:"post",dataType:"json",dataFilter:function(t){var e="true"==$.trim(t);return $("#sendcode").prop("disabled",!e),e}}}},messages:{tel:{required:"请输入手机号",minlength:"确认手机不能小于11个字符",ismobile:"请输入有效的手机号码",remote:"该手机号不存在"},yzmcode:{required:"请输入验证码"},msgcode:{required:"请输入手机验证码",digits:"验证码必须是数字",minlength:"验证码不少于4位"},repsd:{required:"请输入密码",minlength:"密码不少于6个字符"}}},function(){e.disb($("#rebtn")),$("#reform").ajaxSubmit({success:function(t){1==t.code?(layer.msg(t.msg,{icon:1}),setTimeout(function(){window.location.href="/login.html"},1e3)):layer.msg(t.msg,{icon:0})}})}),3==t.temdata.tap&&e.check("#regbindform",{rules:{tel:{ismobile:!0,remote:{url:"/api/ver1/Login/checkphone",type:"post",dataType:"json",dataFilter:function(t){var e="true"!=t;return $("#sendcode").prop("disabled",!e),e}}}},messages:{tel:{required:"请输入手机号",minlength:"确认手机不能小于11个字符",ismobile:"请输入有效的手机号码",remote:"该手机已被注册，请选择已有账号绑定"},yzmcode:{required:"请输入验证码"},msgcode:{required:"请输入手机验证码",digits:"验证码必须是数字",minlength:"验证码不少于4位"},rebpsd:{required:"请输入密码",minlength:"密码不少于6个字符"}}},function(){e.disb($("#regbindbtn")),$("#regbindform").ajaxSubmit({success:function(t){1==t.code?(layer.msg(t.msg,{icon:1}),setTimeout(function(){window.location.href="/main.html#/program/pro"},2e3)):layer.msg(t.msg,{icon:0})}})}),4==t.temdata.tap&&e.check("#oldform",{messages:{tel:{required:"请输入用户名/手机号",minlength:"用户名/手机号不少于6位数"},rebpsd:{required:"请输入密码",minlength:"密码不少于6个字符"}}},function(){e.disb($("#oldbtn")),$("#oldform").ajaxSubmit({success:function(t){1==t.code?(layer.msg(t.msg,{icon:1}),setTimeout(function(){window.location.href="/main.html#/program/pro"},2e3)):layer.msg(t.msg,{icon:0})}})}),t.yzm=function(){var t="index.php/captcha/new.html?height=32&width=150&font_size=18";e.get(t,{},function(t){$("#yzm").attr("src","index.php/captcha/new.html?height=32&width=150&font_size=18")})},t.yzm()}]),myctrl.controller("zlhz_ctrl",["$scope","fac",function(t,e){YS("getLodop"),t.tbname=e.GetQueryString("tb"),t.zlhzbody={url:"ziliao/gd/tujian/"+t.tbname+".html"},t.hzid=t.$id,t.Sdata={},t.has=0,t.$watch("Sdata",function(t){},!0)}]),myctrl.directive("loginenter",["fac",function(t){return{link:function(t,e,a,o){e.on("keyup",function(t){13===t.which&&$("#loginbtn").trigger("click")})}}}]),myctrl.directive("combtn",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=o.combtn+"Time";e[a].time=t.time(),e.$apply()})}}}]),myctrl.directive("pswmd5",["fac",function(t){return{link:function(e,a,o,n){a.on("keyup",function(){var e=t.MD5($(this).val());$(this).next().val(e)})}}}]),myctrl.controller("com_ctrl",["$scope","fac",function(t,e){t.comctrlid=t.$id,t.proinfo=e.getstore("proinfo"),console.log(t.proinfo),t.prcodeid=e.getstore("prcodeid");var a=location.href.split("#")[1];if(a=void 0===a?"/program/pro":a,a||a.split("/")[2]){var o=a.split("/")[1]+"_"+a.split("/")[2],n=window.config.port[o];for(var i in n){var r=o+"_"+i,c=n[i].before;if(c){"function"==typeof c?c(t):""}if(n[i].send){var l=r+"Data";n[i].send.curPage?n[i].send.curPage=1:"";t[l]=n[i].send}if(void 0!==n[i].t){var d=r+"Time",s={time:"",def:n[i].t};s.time=s.def,t[d]=s}if(n[i].fun){var m=r+"Fun";t[m]=n[i].fun}var u=n[i].facfun;e[u](t,r),console.log({name:n[i].pname,cope:t})}}}]),myctrl.controller("tables_ctrl",["$scope","fac",function(t,e){var a="json/data.json",o="";t.alldata=[],e.get(a,o,function(e){return e.code>0?(layer.msg("请求成功!"),void(t.alldata=e.data)):(layer.msg("请求失败"),!1)})}]),myctrl.controller("zl_ctrl",["$scope","fac",function(t,e){YS("layer");var a=e.getscope_byid(t,t.hzid),o=e.getstore("zlval");o.prcodeid=e.getstore("prcodeid"),o.scodeid=e.getstore("scodeid"),o.code||(o.code=e.GetQueryString("tb")),o.codeid=o.codeid.join(","),t.com_zlData=o,t.com_zlFun=function(t,e){a.Sdata=t.data,a.has=t.hasuser},e.post_data(t,"com_zl")}]),myctrl.controller("jilu_ctrl",["$scope","fac",function(t,e){YS("layer"),t.lsshow=1,t.com_jiluData={codeid:e.GetQueryString("id")},t.com_jiluFun=function(e,a){t.jlname=e.jlname},e.post_data(t,"com_jilu")}]),myctrl.controller("hdtworklist_ctrl",["$scope","fac",function(t,e){function a(t,a){for(var o=[],n=t,i=0;i<a;i++){var r="";0===i?r=n:(r=e.timetostr(e.getNextMonth(e.strtotime(n)))/1e3,n=r);var c={};c.title=e.getmonthcn(r),c.chl=["5","10","15","20","25",e.getyuemo(e.strtotime(r))],o.push(c)}return o}console.log(t);var o=root2+"ver1/Index/program_gantt_worklist";e.post(o,{codeid:localStorage.getItem("hcodeid")},function(o){if(1==o.code){var n=o.data.hdata[0];o.data.datalist.sort(function(t,e){return t.myorder-e.myorder}),t.maindata=o.data.datalist,t.title=n.htitle,t.ftitle=n.ftitle,t.danwei=n.comtitle,t.crtime="编制时间："+n.creat_time,t.btime=n.btime,t.etime=n.etime,t.data=[],angular.forEach(t.maindata,function(a){var o={};o.title=a.rtitle,o.riqi=e.time(a.rbtime)/1e3,o.time=e.time(a.retime)/1e3,t.data.push(o)});var i=e.timetostr(n.btime)/1e3,r=e.timetostr(n.etime)/1e3,c=(r-i)/86400,l=parseInt(c/30)+1,d=a(i,l);t.mddata=d;var s=0;angular.forEach(t.data,function(t,e){t.title.length>s&&(s=t.title.length)});var m=14*s+14,u=120*d.length,p=50,f=25*t.data.length,g=100+m+u+100+288,_=100+p+f+100;t.svgw=g,t.svgh=_,t.titlew=m,t.biaotouwidth=m+288,t.tablew=m+288+u,t.tableh=50+f,t.tbodyw=u,t.tbodyh=f,t.temdata={},t.bianhao="编号",t.renwu="任务名称",t.kaishi="开始日期",t.jieshu="结束日期",t.gongqi="工期"}}),t.strtime=function(t){var a=parseInt(t),o="";return o=a>0?e.strtotime(a):""},t.jianfa=function(t,e){var a="",o=e-t;return e>0&&t>0&&(a=o/24/60/60+1),a},t.cerlen=function(t,a){var o="",n=a-t;o=n/24/60/60+1;for(var i=4*o,r=e.getyuemo(e.strtotime(t)),c=e.monlastday(t),l=e.timetostr(c)/1e3,d=0;l<=a&&30!=r;){31==r&&(d+=1),28==r&&(d-=2),29==r&&(d-=1);var s=e.getNextMonth(e.strtotime(l));r=e.getyuemo(s);var m=e.monlastday(e.timetostr(s));l=e.timetostr(m)/1e3}var u=4*d,p=i-u;return p},t.bglen=function(t,a,o){var n=t,i=e.monfirstday(a),r=e.timetostr(i)/1e3,c=e.getMonths(n,i)-1,l=(a-r)/24/60/60,d=120*c+4*Math.floor(l)+o+100;return d},$(document).on("click","#btnPrint",function(){YS("printarea",function(){$("#printContent").printArea()})})}]),myctrl.directive("moresel",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){for(var a=(t.getscope_byid(e,2),0);a<o.moresel;a++)o.partkey==a?$("#openpart"+a).removeClass("dpn"):$("#openpart"+a).addClass("dpn")})}}}]),myctrl.directive("sinsel",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,2),n=(a.ftypelist,t.getscope_byid(e,e.comctrlid));l=JSON.parse(o.sinsel).fid;var i={};i.codeid=e.value.codeid;var r=root2+config.url.com_em.url,c=$("#sinsel"+o.partkey+o.tkey).hasClass("clblue");if(0==c?$("#sinsel"+o.partkey+o.tkey).addClass("clblue"):$("#sinsel"+o.partkey+o.tkey).removeClass("clblue"),$.inArray(o.partkey,l)==-1)var l=l.concat(o.partkey);else var l=$.grep(l,function(t){return t!=o.partkey});i.fid=l.join(","),t.post(r,i,function(e){t.msg(e),1==e.code&&(n.program_plan_betonlist.datalist[o.tkey].fid=l,a.$apply())})})}}}]),myctrl.directive("ganttworkwin",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,2);t.setstore("hcodeid",e.value.codeid),a.win.portkey=o.ganttworkwin,e.$parent.$parent.worklist.time=t.time(),e.$parent.$parent.worklist.codeid=e.$parent.value.codeid,e.win.url="./html/win/"+window.config.win[o.ganttworkwin].template+".html?time="+t.time(),a.$apply()})}}}]),myctrl.directive("changekey",["fac",function(t){return{link:function(t,e,a,o){e.on("click",function(){t[a.changekey][a.key]=a.val,t.$apply()})}}}]),myctrl.directive("bychangeexcel",["fac",function(t){return{link:function(e,a,o,n){a.on("change",function(){var a=t.getscope_byid(e,e.comctrlid);$(o.element).ajaxSubmit({url:root2+"ver1/Index/exportxlssongjian",success:function(t){a.winsongjian=t.data,a.$apply()}})})}}}]),myctrl.directive("tableexport",["fac",function(t){return{link:function(t,e,a,o){e.on("click",function(){$("#tableexport").tableExport({type:"excel"})})}}}]),myctrl.directive("layerdateone",["fac",function(t){return{link:function(t,e,a,o){e.on("click",function(){var e=a.layerdateone,o=a.key;laydate.skin("molv"),laydate({format:"YYYY-MM-DD",festival:!0,choose:function(a){t[e][o]=a}})})}}}]),myctrl.directive("laydateedit",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=o.laydateedit,n=$(this);laydate.skin("molv"),laydate({format:"YYYY-MM-DD",festival:!0,choose:function(o){e.value[a]=o;var i={};i.codeid=e.value.codeid,i[a]=o;var r=root2+config.url.com_em.url;t.post(r,i,function(e){t.msg(e),1==e.code?n.addClass("ipright").removeClass("ipwrong"):n.addClass("ipwrong").removeClass("ipright")})},cleardate:function(){var o={};o.codeid=e.value.codeid,o[a]=0;var i=root2+config.url.com_em.url;t.post(i,o,function(e){t.msg(e),1==e.code?n.addClass("ipright").removeClass("ipwrong"):n.addClass("ipwrong").removeClass("ipright")})}})})}}}]),myctrl.directive("duibilaydate",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=o.duibilaydate,n=$(this);laydate.skin("molv"),laydate({format:"YYYY-MM-DD",festival:!0,choose:function(o){if(e.value[a]=o,t.time(e.value.retime)<t.time(e.value.rbtime)&&e.value.retime)return layer.msg("结束日期必须大于开始日期",{icon:0}),!1;var i={};i.codeid=e.value.codeid,i[a]=o;var r=root2+config.url.com_em.url;t.post(r,i,function(e){t.msg(e),1==e.code?n.addClass("ipright").removeClass("ipwrong"):n.addClass("ipwrong").removeClass("ipright")})},cleardate:function(){var o={};o.codeid=e.value.codeid,o[a]=0;var i=root2+config.url.com_em.url;t.post(i,o,function(e){t.msg(e),1==e.code?n.addClass("ipright").removeClass("ipwrong"):n.addClass("ipwrong").removeClass("ipright")})}})})}}}]),myctrl.directive("bylaydate",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=o.bylaydate;$(this);laydate.skin("molv"),laydate({format:"YYYY-MM-DD",festival:!0,choose:function(o){e.value[a]=o;var n=t.time(o),i={};i.codeid=e.value.codeid,i.byriqi=o;var r=n+24192e5;e.value.bytime=i.bytime=t.numtotime(r);var c=n+2592e6;e.value.kstime=i.kstime=t.numtotime(c);var l=n+24192e5;e.value.zttime=i.zttime=t.numtotime(l);var d=n+6048e5;e.value.cmtime=i.cmtime=t.numtotime(d);var s=root2+config.url.com_em.url;t.post(s,i,function(a){t.msg(a),e.bytip=1==a.code?"ipright":"ipwrong"})},cleardate:function(){var o={};o.codeid=e.value.codeid,o[a]=0,o.bytime=0,e.value.bytime="",o.kstime=0,e.value.kstime="",o.zttime=0,e.value.zttime="",o.cmtime=0,e.value.cmtime="";var n=root2+config.url.com_em.url;t.post(n,o,function(a){t.msg(a),e.bytip=1==a.code?"ipright":"ipwrong"})}})})}}}]),myctrl.directive("sjlaydate",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=o.sjlaydate+"riqi",n=o.sjlaydate+"time",i=o.sjlaydate+"tip";$(this);laydate.skin("molv"),laydate({format:"YYYY-MM-DD",festival:!0,choose:function(o){e.value[a]=o;var r={};r.codeid=e.value.codeid,r[a]=o;var c=t.time(o);e.value[n]=r[n]=t.numtotime(c+24192e5);var l=root2+config.url.com_em.url;t.post(l,r,function(a){t.msg(a),e.value[i]=1==a.code?"ipright":"ipwrong"})},cleardate:function(){var o={};o.codeid=e.value.codeid,o[a]=0,o[n]=0,e.value[n]="";var i=root2+config.url.com_em.url;t.post(i,o,function(a){t.msg(a),e.value.sjtip=1==a.code?"ipright":"ipwrong"})}})})}}}]),myctrl.directive("yclaydate",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a="",n="";"intime"==o.yclaydate?(a="intime",n="stime"):(a="stime",n="intime");$(this);laydate.skin("molv"),laydate({format:"YYYY-MM-DD",festival:!0,choose:function(o){e.value[a]=o;var i={};i.codeid=e.value.codeid;t.time(o);if(i[a]=o,"intime"==a)i[n]=o,e.value[n]=o;else if(t.time(e.value.stime)<t.time(e.value.intime))return layer.msg("送检日期必须大于进场日期",{icon:5}),!1;var r=root2+config.url.com_em.url;t.post(r,i,function(a){t.msg(a),e.value.yctip=1==a.code?"ipright":"ipwrong"})},cleardate:function(){var o={};o.codeid=e.value.codeid,o[a]=0,o[n]=0,e.value[n]="";var i=root2+config.url.com_em.url;t.post(i,o,function(a){t.msg(a),e.value.yctip=1==a.code?"ipright":"ipwrong";
})}})})}}}]),myctrl.directive("byyledit",["fac",function(t){return{link:function(e,a,o,n){a.on("change",function(n){var i=($(this),o.byyledit),r={};r.codeid=e.value.codeid,r[i]=a.val();var c=parseInt(a.val());r.byzushu=c>=1e3?Math.ceil(c/200):Math.ceil(c/100),e.value.byzushu=r.byzushu;var l=root2+config.url.com_em.url;t.post(l,r,function(a){t.msg(a),e.yltip=1==a.code?"ipright":"ipwrong"})})}}}]),myctrl.directive("comwinadd",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,2);1==o.gantt&&(e.winData={}),a.winTime.time=t.time(),a.win.portkey=o.comwinadd,a.win.extendtwo=o.extendtwo?o.extendtwo:"",a.win.extendone=o.extendone?o.extendone:"",a.win.extendthree=o.extendthree?o.extendthree:"";for(var n in window.config.win[o.comwinadd].temdata)window.config.win[o.comwinadd].temdata[n]="";a.winData=angular.copy(window.config.win[o.comwinadd].temdata),a.$apply()})}}}]),myctrl.directive("comwinedit",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.comctrlid);a.winTime.time=t.time(),a.win.portkey=o.comwinedit,a.win.extendtwo=o.extendtwo?o.extendtwo:"",a.win.extendone=o.extendone?o.extendone:"",a.win.extname=o.extname?o.extname:"",a.winData=e.value,a.$apply()})}}}]),myctrl.directive("comsetwin",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,2);a.winTime.time=t.time();var n=o.len;a.win.portkey=o.comsetwin,a.win.extendone=o.key,a.win.extendtwo=o.key+"arr",a.win.extname=o.extname?o.extname:"",e.value.len=[];for(var i=0;i<n;i++)e.value.len.push({});a.winData=e.value,a.$apply()})}}}]),myctrl.directive("wenduwin",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,2);a.com_wenduData={codeid:e.value.codeid,type:"ty"},a.com_wenduFun=function(e){a.winTime.time=t.time(),a.win.portkey=o.wenduwin,a.win.extname=o.extname?o.extname:""},a.com_wenduTime.time=t.time(),a.$apply()})}}}]),myctrl.directive("xlsimport",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,2),n=t.getscope_byid(e,e.comctrlid);a.winTime.time=t.time(),n.winsongjian=[],n.win.portkey=o.xlsimport,n.$apply()})}}}]),myctrl.directive("printwin",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=[];if($("input[name="+o.type+"]").each(function(t,e){e.checked&&a.push(e.value)}),a.length||layer.msg("请勾选需要汇总打印的选项！",{icon:0}),a.length){t.setstore("zlval",{codeid:a,type:o.type});var n=t.getscope_byid(e,2);n.winTime.time=t.time(),n.win.portkey=o.printwin,n.$apply()}})}}}]),myctrl.directive("saveresult",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,2);console.log(a.winData);var o=$("#resultval").find("input"),n=[],i=[];o.each(function(t,e){e.value&&(i.push({val:e.value}),n.push(e.value))});var r=n.join(","),c={};c.codeid=a.winData.codeid,c[a.win.extendone]=r;var l=root2+config.url.com_em.url;t.post(l,c,function(e){t.msg(e),1==e.code&&(layer.closeAll(),a.winData[a.win.extendone]=r,a.winData[a.win.extendtwo]=i)})})}}}]),myctrl.directive("prowinedit",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.comctrlid);a.winTime.time=t.time(),a.win.portkey=o.prowinedit;var n=t.getscope_byid(e,2);a.program_pro_infoTime.time=t.time(),a.program_pro_infoData.codeid=e.value.codeid,a.program_pro_infoFun=function(e,a){e.data[0].pid&&(n.com_cityData={pid:e.data[0].pid},n.com_cityTime.time=t.time())},a.$apply()})}}}]),myctrl.directive("sinwinedit",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,2);a.winTime.time=t.time(),a.win.portkey=o.sinwinedit,a.win.extendtwo=o.extendtwo?o.extendtwo:"",a.win.extendone=o.extendone?o.extendone:"",a.winData=e.value,a.$apply()})}}}]),myctrl.directive("ganttwin",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.comctrlid);a.winTime.time=t.time(),a.win.portkey=o.ganttwin,t.setstore("hcodeid",e.value.codeid),a.program_gantt_worklistTime.time=t.time(),a.program_gantt_worklistData.codeid=e.value.codeid,a.$apply()})}}}]),myctrl.directive("comdelone",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.comctrlid),n=o.comdelone+"Data";if(a[n]={codeid:o.sendid},!o.sendid)return layer.msg("参数错误"),!1;var i=layer.confirm("您确定要删除么？",{btn:["确定","取消"]},function(){var e=o.comdelone+"Time";a[e].time=t.time(),a.$apply(),layer.close(i)}),r=(e.$index,o.comdelone+"Fun");a[r]=function(n){if("1"==n.code){"program_pro_del"==o.comdelone&&(a.program_pro_listTime.time=t.time()),t.lmsg(n);e.v?e.v.isdel=1:e.value.isdel=1}else t.lmsg(n)}})}}}]),myctrl.directive("delmore",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(a){var n=t.getscope_byid(e,e.comctrlid),i=[],r=[];angular.forEach(n[o.from].datalist,function(t,e){1==t.check&&(r.push(e),i.push(t.codeid))});var c=o.delmore+"Fun";if(n[c]=function(e){"1"==e.code?(t.lmsg(e),r.map(function(t){n[o.from].datalist[t].isdel=1})):layer.msg(e.msg)},!i.length)return layer.msg("请选择选项",{icon:0}),!1;var l=layer.confirm("您确定要删除么？",{btn:["确定","取消"]},function(){var e=o.delmore+"Time",a=o.delmore+"Data";n[a].codeid=i,n[e].time=t.time(),n.$apply(),layer.close(l)})})}}}]),myctrl.directive("addpro",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.comctrlid);return a.program_pro_addData=a.winData,""==a.winData.prname?(layer.msg("请输入工程名称",{icon:0}),!1):""==a.winData.pid?(layer.msg("请选择省份",{icon:0}),!1):""==a.winData.cityid?(layer.msg("请选择城市",{icon:0}),!1):""==a.winData.jiegou?(layer.msg("请选择结构类型",{icon:0}),!1):""==a.winData.kaigong?(layer.msg("请填写开工日期",{icon:0}),!1):""==a.winData.jungong?(layer.msg("请填写竣工日期",{icon:0}),!1):t.time(a.winData.kaigong)>t.time(a.winData.jungong)?(layer.msg("开工日期必须小于竣工日期",{icon:0}),!1):a.winData.proimg?(a.program_pro_addFun=function(e,o){1==e.code?(layer.closeAll(),layer.msg("工程添加成功！",{icon:1}),a.program_pro_listTime.time=t.time()):layer.msg(e.msg,{icon:2})},a.program_pro_addTime.time=t.time(),void a.$apply()):(layer.msg("请上传工程图片",{icon:0}),!1)})}}}]),myctrl.directive("changepro",["fac",function(t){return{link:function(e,a,o,n){a.on("change",function(){var n=o.changepro,i=o.key;e[n][i]=a.val(),e[n].cityid="";var r=t.getscope_byid(e,2);r.litsave=1,r.com_cityData={pid:a.val()},r.com_cityTime.time=t.time(),r.$apply()})}}}]),myctrl.directive("changecity",["fac",function(t){return{link:function(e,a,o,n){a.on("change",function(){var n=o.changecity,i=o.key;if(o.key2){var r=o.key2;e[n][r]=a.find("option:selected").text()}var c=t.getscope_byid(e,e.comctrlid),l=t.getscope_byid(e,2);l.litsave=1,c[n][i]=a.val(),c.$apply()})}}}]),myctrl.directive("procity",["fac",function(t){return{link:function(e,a,o,n){a.on("change",function(){var a=t.getscope_byid(e,2);a.litsave=1,a.$apply()})}}}]),myctrl.directive("comcheck",["fac",function(t){return{link:function(t,e,a,o){e.on("click",function(e){var o=[1,0],n=a.comcheck;t.value[n]=void 0===t.value[n]?0:t.value[n],t.value[n]=o[t.value[n]],t.$apply()})}}}]),myctrl.directive("checkallbykey",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(n){var i=o.checkallbykey,r=$(a).is(":checked"),c=t.getscope_byid(e,e.comctrlid);angular.forEach(c[i].datalist,function(t,e){t[o.key]=r?1:0}),c.$apply()})}}}]),myctrl.directive("comcheckall",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(n){var i=o.comcheckall,r=$(a).is(":checked"),c=t.getscope_byid(e,e.comctrlid);angular.forEach(c[i].datalist,function(t,e){t.check=r?1:0}),c.$apply()})}}}]),myctrl.directive("checkedit",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(a){var n=$(this).is(":checked")?"1":"0",i=o.checkedit,r={};r.codeid=e.value.codeid,r[i]=n;var c=root2+config.url.com_em.url;t.post(c,r,function(a){t.msg(a),1==a.code&&(e.value[i]=n)})})}}}]),myctrl.directive("checktbtype",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(a){var n=$(this).is(":checked")?"1":"0",i={},r=o.checktbtype,c=[];$(r).find("input:checkbox:checked").each(function(t,e){c.push(e.value)}),i.codeid=o.codeid,i.temjson=c.join(",");var l=root2+config.url.com_em.url;t.post(l,i,function(a){t.msg(a),1==a.code&&(e.value[key]=n)})})}}}]),myctrl.directive("comselect",["fac",function(t){return{link:function(e,a,o,n){a.on("change",function(){var n=t.getscope_byid(e,2),i=o.comselect,r=o.key;n[i][r]=$(a).val(),n.$apply()})}}}]),myctrl.directive("comfind",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.comctrlid),n=o.comfind+"Data";a[n].curPage=1;var i=o.comfind+"Time";a[i].time=t.time(),a.$apply()})}}}]),myctrl.directive("comadd",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(a){var n=t.getscope_byid(e,e.comctrlid),i={};i.codeid=n[o.comadd].codeid,o.prcodeid&&(i.prcodeid=o.prcodeid),o.scodeid&&(i.scodeid=o.scodeid),o.hcodeid&&(i.hcodeid=o.hcodeid),o.ext1&&(i[o.ext1]=o.ext1v),o.ext2&&(i[o.ext2]=o.ext2v);var r=root2+config.url.com_ea.url;t.post(r,i,function(e){t.msg(e),1==e.code&&(i.codeid=e.data.codeid,i.myorder=0,i.morder=0,n[o.comadd].datalist.unshift(i))})})}}}]),myctrl.directive("comedit",["fac",function(t){return{link:function(e,a,o,n){a.on("change",function(n){var i=$(this),r=o.comedit,c={};c.codeid=e.value.codeid,c[r]=a.val();var l=root2+config.url.com_em.url;t.post(l,c,function(o){var n="morder"==r||"myorder"==r?parseInt(a.val()):a.val();e.value[r]=n,t.msg(o),1==o.code?i.addClass("ipright").removeClass("ipwrong"):i.addClass("ipwrong").removeClass("ipright")})})}}}]),myctrl.directive("pornameedit",["fac",function(t){return{link:function(e,a,o,n){a.on("change",function(n){var i=$(this),r=o.pornameedit,c={};c.codeid=e.value.codeid,c[r]=a.val();var l=root2+config.url.com_em.url;t.post(l,c,function(o){var n=a.val();e.value[r]=n,t.msg(o),1==o.code?(i.addClass("ipright").removeClass("ipwrong"),e.program_pro_listTime.time=t.time()):i.addClass("ipwrong").removeClass("ipright")})})}}}]),myctrl.directive("plus",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(a){var n=t.getscope_byid(e,2),i=n[o.plus][o.key];n[o.plus][o.key]=i?parseInt(i)+1:1,n.$apply()})}}}]),myctrl.directive("minus",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(a){var n=t.getscope_byid(e,2),i=n[o.minus][o.key];n[o.minus][o.key]=i?i-1:1,n.$apply()})}}}]),myctrl.directive("createpart",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(a){var o=t.getscope_byid(e,2);if("0"==o.winData.jiegou&&layer.msg("请选择框架类型。",{icon:0}),o.winData.cengshu>50)return layer.msg("层数不能超过50。",{icon:0}),!1;if(o.winData.cengshu){o.winData.jichu=config.ext.jichu.join("\n");for(var n=[],i=0;i<o.winData.cengshu;i++){var r=config.ext.zhuti[i]+"层梁板";n.push(r);var c="1"===o.winData.jiegou?"柱":"墙柱",l=config.ext.zhuti[i]+"层"+c;n.push(l)}n.push("屋面梁板"),o.winData.zhuti=n.join("\n"),o.$apply()}else layer.msg("请输入层数。",{icon:2})})}}}]),myctrl.directive("loginout",["fac",function(t){return{link:function(t,e,a,o){e.on("click",function(t){})}}}]),myctrl.directive("selcode",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a="#"+o.selcode;e.stuinfo_safe_psdeditData=e.stuinfo_safe_selcodeFun=function(t){if("0"==t.code){$(a).prop("disabled",!0);var e=50,o=setInterval(function(){e>0?$(a).html(e+"秒后重新发送"):($(a).html("重新发送"),$(a).removeAttr("disabled"),window.clearInterval(o)),e--},1e3)}else layer.msg("发送失败"),$(a).prop("disabled",!1)},e.stuinfo_safe_selcodeTime.time=t.time(),e.$apply()})}}}]),myctrl.directive("gattadd",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.comctrlid);return a.winData.codeid=t.getstore("prcodeid"),a.temdata=a.winData,a.winData.htitle?a.winData.etime&&a.winData.btime&&a.winData.etime<a.winData.btime?(layer.msg("结束日期必须大于开始日期"),!1):(a.program_gantt_addFun=function(e){t.addmsg(a,e,"program_gantt_list")},a.program_gantt_addData=a.winData,a.program_gantt_addTime.time=t.time(),void a.$apply()):(layer.msg("标题不能为空！"),!1)})}}}]),myctrl.directive("gattedit",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.comctrlid);return a.program_gantt_editData=a.winData,a.winData.htitle?a.winData.etime<a.winData.btime?(layer.msg("结束日期必须大于开始日期"),!1):(a.program_gantt_editFun=function(t,e){layer.closeAll(),layer.msg(t.msg,{icon:1})},a.program_gantt_editTime.time=t.time(),void a.$apply()):(layer.msg("主标题不能为空！"),!1)})}}}]),myctrl.directive("ganttrenwuadd",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.comctrlid),o={};a.program_gantt_worklist.datalist.push(o),a.$apply()})}}}]),myctrl.directive("sinadd",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.comctrlid);console.log(a.winData),a.winData.codeid=o.sinadd;var n={};return n=a.winData,""==a.winData.sname?(layer.msg("请输入子单位名称",{icon:0}),!1):""==a.winData.cengshu?(layer.msg("请输入层数",{icon:0}),!1):a.winData.cengshu>50?(layer.msg("层数不能超过50。",{icon:0}),!1):(""==a.winData.jiegou&&(n.jiegou="1"),""==$.trim(a.winData.jichu)?(layer.msg("基础部位不能为空",{icon:0}),!1):""==$.trim(a.winData.zhuti)?(layer.msg("主体部位不能为空",{icon:0}),!1):a.winData.sinimg?(a.program_sinlist_sinaddFun=function(t){1==t.code?(layer.closeAll(),layer.msg(t.msg,{icon:1}),n.codeid=t.data.codeid,n.rd=t.data.rd,console.log(n.rd),e.program_sinlist_sinlist.datalist.push(n)):layer.msg(t.msg,{icon:2})},a.program_sinlist_sinaddData=a.winData,a.program_sinlist_sinaddTime.time=t.time(),void a.$apply()):(layer.msg("请添加子单位照片",{icon:0}),!1))})}}}]),myctrl.directive("setnowprosin",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){t.setstore("prcodeid",o.prcodeid),t.setstore("prname",e.value.prname),t.setstore("scodeid",o.scodeid||"")})}}}]),myctrl.directive("hanjie",["fac",function(t){return{link:function(t,e,a,o){e.on("click",function(){alert("hanjie")})}}}]),myctrl.directive("changemattersin",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.comctrlid);angular.forEach(a.program_plan_sinlist.datalist,function(t,e){t.now=""}),e.value.now="active",e.value.type===!0?(a.program_plan_matterlistTime.time=t.time(),angular.forEach(a.yctypelist,function(t,e){t.ngclass="label-default"}),a.yctypelist[9].ngclass="label-primary",a.matter_url=a.yctypelist[9].url,a.yctype=a.yctypelist[9].t):(angular.forEach(a.typelist,function(t,e){t.ngclass="label-default"}),a.typelist[0].ngclass="label-primary",a.plansin_body=a.typelist[0].url,a.stype=a.typelist[0].t,t.setstore("scodeid",e.value.codeid),t.setstore("sname",e.value.sname),a.program_plan_betonlistData={codeid:e.value.codeid},a.program_plan_betonlistTime.time=t.time()),e.$apply()})}}}]),myctrl.directive("changesin",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.comctrlid),o=(t.getscope_byid(e,2),e.value.codeid);t.setstore("scodeid",o),t.setstore("sname",e.value.sname),a.program_work_sinimageData={codeid:o},a.program_work_sinimageTime.time=t.time(),a.program_work_matcountData={codeid:t.getstore("prcodeid")},a.program_work_matcountTime.time=t.time(),a.$apply()})}}}]),myctrl.directive("changestype",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.comctrlid);angular.forEach(a.typelist,function(t,e){t.ngclass="label-default"}),e.value.ngclass="label-primary",a.plansin_body=e.value.url,a.stype=e.value.t,a.program_plan_betonlistData.type=e.value.t,a.program_plan_betonlistTime.time=t.time(),e.$apply()})}}}]),myctrl.directive("changeyctype",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.comctrlid);angular.forEach(a.yctypelist,function(t,e){t.ngclass="label-default"}),e.value.ngclass="label-primary",a.matter_url=e.value.url,a.yctype=e.value.t,e.$apply()})}}}]),myctrl.directive("masteradd",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(a){var n=t.getscope_byid(e,e.comctrlid),i={};i.codeid=n[o.masteradd].codeid,o.prcodeid&&(i.prcodeid=o.prcodeid),o.yctype&&(i.yctype=o.yctype);var r=root2+config.url.com_ea.url;t.post(r,i,function(e){t.msg(e),1==e.code&&(i.codeid=e.data.codeid,n[o.masteradd].datalist.unshift(i))})})}}}]),myctrl.directive("workshowchange",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,2);if(a.isshow="0"==a.isshow?1:0,a.showtype=o.workshowchange,a.isshow){var n=t.getscope_byid(e,e.comctrlid);setTimeout(function(){var t=[n.quanbu,n.jichu,n.zhuti],e=["","-基础","-主体"],o=localStorage.getItem("sname"),i=o+e[a.showtype]+"- 送检统计图";hntchart(t[a.showtype],i),ycchart(n.yuancai,"工程原材送检统计图")},500)}a.$apply()})}}}]),myctrl.directive("changest",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,2);a.showtype=o.changest;var n=t.getscope_byid(e,e.comctrlid),i=[n.quanbu,n.jichu,n.zhuti],r=["","-基础","-主体"],c=localStorage.getItem("sname"),l=c+r[a.showtype]+"- 送检统计图";hntchart(i[a.showtype],l),n.$apply(),setTimeout(function(){$('*[data-toggle="tooltip"]').tooltip()},300)})}}}]),myctrl.directive("setlocalstorage",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var e=o.setlocalstorage;t.setstore(e,o.code)})}}}]),myctrl.directive("lsshow",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){console.log(e);var a=t.getscope_byid(e,2);a.lsshow="0"==a.lsshow?1:0,a.$apply()})}}}]),myctrl.directive("modsendcode",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=$(this);if(!e.data.oldpasswd)return layer.msg("请输入旧密码!"),!1;if(!e.data.tel||e.data.tel.length<11)return layer.msg("请输入正确的手机号!"),!1;var o=root2+"ver1/Login/phonecode";t.post(o,e.data,function(e){$("#sendcode").prop("disabled",!0),e.code>0?setTimeout(function(){t.sendphone(a)},1e3):$("#sendcode").prop("disabled",!1),layer.msg(e.desc)})})}}}]),myctrl.directive("changepsw",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=root2+"ver1/Index/user_password_phone",o={oldpasswd:"",phcode:e.data.phcode,tel:e.data.tel};o.oldpasswd=t.MD5(e.data.oldpasswd),t.post(a,o,function(t){layer.msg(t.msg),t.code>0&&(window.location.href="./login.html")})})}}}]),myctrl.directive("changeimg",["fac",function(t){return{link:function(e,a,o,n){a.on("change",function(){var a=t.getObjectURL(this.files[0]);a&&$(".basicinfortimg").find("img").attr("src",a),$(o.element).ajaxSubmit({url:root2+"ver1/Index/uploadImage",success:function(t){e.imgurl=t.url,e.$apply()}})})}}}]),myctrl.directive("saveperson",["fac",function(t){return{link:function(t,e,a,o){e.on("click",function(){$(a.element).ajaxSubmit({url:root2+a.saveperson,success:function(e){layer.msg(e.msg),t.com_info.imgurl=t.imgurl,t.$apply()}})})}}}]),myctrl.directive("sameimg",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=e.user_info_list.datalist[0],n={};n.photourl="1"==o.sameimg?a.pcweimg:a.qqimg;var i=root2+"ver1/Index/user_info_save";layer.confirm("确定要同步头像吗？",{btn:["确定","取消"]},function(){t.post(i,n,function(t){t.code>0?(layer.msg("同步成功！",{icon:1}),$(".baseimg").attr("src",n.photourl)):layer.msg("同步失败!",{icon:0})})},function(){})})}}}]),myctrl.directive("userUnbind",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=o.userUnbind,n=o.tip,i=root2+"ver1/Index/unbindtwo";t.post(i,{type:a},function(t){t.code>0?(layer.msg(t.msg,{icon:1}),e.user_info_list.datalist[0][n]=0):layer.msg(t.msg,{icon:0})})})}}}]),myctrl.directive("showtab",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,2),n=o.showtab;e[n].chl&&e[n].chl.length>0?(a.body.zlurl="html/program/zl_list.html",a.zllistdata.list=e[n].chl):(console.log(e[n]),a.body.zlurl="ziliao/gd/tujian/"+e[n].code+".html?"+t.time(),t.setstore("zlval",e[n])),""===e[n].o&&(e[n].o="-open"),a.zllistdata.id=e[n].id,a.zllistdata.t=e[n].t,a.zllistdata.zf=e[n].zf?e[n].zf:"",a.zllistdata.name=e[n].name,a.$apply()})}}}]),myctrl.directive("showtab2",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,2);a.body.zlurl="ziliao/gd/tujian/"+e[key].code+".html?"+t.time()})}}}]),myctrl.directive("phonecode",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=o.phonecode,n=$(this),i=root2+"ver1/Login/newphonecode";t.post(i,e[a],function(e){e.code>0?t.sendphone(n):layer.msg(e.msg,{icon:0})})})}}}]),myctrl.directive("closeopen",["fac",function(t){return{link:function(t,e,a,o){e.on("click",function(e){var o=a.closeopen;t[o].o=t[o].o?"":"-open",t.$apply(),e.stopPropagation()})}}}]),myctrl.directive("register",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){return e.registerData.tel?e.registerData.yzmcode?e.registerData.smscode?e.registerData.password?(e.registerTime.time=t.time(),void e.$apply()):(layer.msg("请输入密码!",{icon:0}),!1):(layer.msg("请输入短信验证码!",{icon:0}),!1):(layer.msg("请输入验证码!",{icon:0}),!1):(layer.msg("请填写手机号码!",{icon:0}),!1)})}}}]),myctrl.directive("caijitem",["fac",function(fac){return{link:function($scope,iElm,iAttrs){iElm.on("click",function(){var temurl=iAttrs.temurl,cityid=iAttrs.caijitem,htmlobj="",url=root2+"ver1/Index/temurl";fac.load(1),fac.post(url,{temurl:temurl},function(re){if(fac.load(0),re.code>0){htmlobj=re.html;var wea=$(htmlobj).find(".wea-detail"),li=wea.find("li").length,ilen=wea.find("i").length,arr=[];for(i=0;i<li;i++){var ax=wea.find("li").eq(i).find("p").text();ax=$.trim(ax);var date=ax.split("日"),myDate=new Date,Y=myDate.getFullYear();d=date[0].replace("月","-"),riqi=Y+"-"+d;var time=fac.timetostr(riqi)/1e3,htem=wea.find("li").eq(i).find("i").find("font").eq(0).text(),ltem=wea.find("li").eq(i).find("i").find("font").eq(1).text();if(htem=parseInt(htem),ltem=parseInt(ltem),htem<ltem){var vvt=htem;htem=ltem,ltem=vvt}var vtem=(htem+ltem)/2,obj={htem:htem,ltem:ltem,vtem:vtem,time:time};arr.push(obj)}if(i>1){var data={temdata:eval(arr),cityid:cityid},sendurl=root2+"ver1/Index/setweather";fac.post(sendurl,data,function(t){t.code>0})}}})})}}}]),myctrl.directive("changec",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,2),o=t.getscope_byid(e,e.comctrlid);e.value.c="0"==e.value.c?1:0,e.$apply(),e.value.c=$(this).is(":checked")?1:0;var n={id:a.zllistdata.id,t:a.zllistdata.t,code:"",zf:a.zllistdata.zf},i=[];angular.forEach(a.zllistdata.list,function(t){1===t.c&&i.push(t.id)}),n.code=i.join(","),n.code=""!==n.code?n.code+",":"",o.program_struct_editFun=function(e,a){t.msg(e)},o.program_struct_editData=n,o.program_struct_editTime.time=t.time(),console.log(o.program_struct_editTime),o.$apply()})}}}]),myctrl.directive("print",["fac",function(t){return{link:function(t,e,a,o){e.on("click",function(){var t=$("#printcss").html(),e='<style type="text/css" media="screen">'+t+"</style>",a=e+$("#printtable").html();try{LODOP=getLodop(),LODOP.PRINT_INIT(""),$("#printtable").width()>800&&LODOP.SET_PRINT_PAGESIZE(2,0,0,"A4"),LODOP.ADD_PRINT_HTM(0,20,"100%","100%",a),LODOP.PREVIEW()}catch(o){console.warn("捕獲print信息錯誤...")}})}}}]),myctrl.directive("printtable",["fac",function(t){return{link:function(t,e,a,o){e.on("click",function(){var t=$("#printcss").html(),e='<style type="text/css" media="screen">'+t+"</style>",a=e+$("#printtable").html();LODOP=getLodop();try{LODOP.PRINT_INIT(""),$("#printtable").width()>800&&LODOP.SET_PRINT_PAGESIZE(2,0,0,"A4"),LODOP.ADD_PRINT_TABLE(35,20,"100%","100%",a),LODOP.PREVIEW()}catch(o){console.warn("捕獲printtable信息錯誤...")}})}}}]),myctrl.directive("saveprocity",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(n){var i=($(this),o.saveprocity),r={};r.codeid=e.value.codeid,r.pid=$("#pid").val(),r.cityid=$("#cityid").val();var c=t.getscope_byid(e,2);r[i]=a.val();var l=root2+config.url.com_em.url;t.post(l,r,function(a){t.msg(a),1==a.code&&(e.program_pro_listTime.time=t.time(),c.litsave=0)})})}}}]),myctrl.directive("savepsd",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(a){var o=t.getscope_byid(e,2);if(""==$.trim(o.winData.oldpasswd))return layer.msg("旧密码不能少于六位!"),!1;if($.trim(o.winData.newpasswd).length<6)return layer.msg("新密码不能少于六位"),!1;if($.trim(o.winData.newpasswd)!=$.trim(o.winData.newpasswdtwo))return layer.msg("两次密码不一致"),!1;var n=angular.copy(o.winData);n.oldpasswd=t.MD5(n.oldpasswd),n.newpasswd=t.MD5(n.newpasswd),n.newpasswdtwo=t.MD5(n.newpasswdtwo);var i=root2+config.url.user_info_psd.url;t.post(i,n,function(e){t.lmsg(e),e.code>0&&setTimeout(function(){layer.closeAll()},2e3)})})}}}]),myctrl.directive("setkey",["fac",function(t){return{link:function(t,e,a,o){e.on("blur",function(){t[a.setkey]=$(this).html(),t.$apply()})}}}]),myctrl.directive("getherexport",["fac",function(t){return{link:function(t,e,a,o){e.on("click",function(){var e=t.program_gether_selData.btime+"至"+t.program_gether_selData.etime+"送检记录";$(".pvtTable").find(".titlename").removeClass("dpn"),$(".pvtTable").tableExport({type:"excel",fileName:e}),$(".pvtTable").find(".titlename").addClass("dpn")})}}}]),myctrl.directive("saveasuser",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.yscid),o=layer.confirm("保存后，本表格的数据存为用户数据，将不再使用系统数据，您确定要保存么？",{btn:["确定","取消"]},function(){a.com_update.time=t.time(),console.log(a.Sdata),layer.close(o),a.$apply()})})}}}]),myctrl.directive("saveassystem",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.yscid);layer.confirm("重置后，本表格将采用系统数据，您确定要重置么？",{btn:["确定","取消"]},function(){a.com_del.time=t.time(),console.log(a.Sdata),layer.closeAll(),a.$apply()})})}}}]),myctrl.directive("diva",["fac",function(t){return{link:function(t,e,a,o){e.on("blur",function(){var e=$(this).text();t.value.a[a.diva]=e,t.$apply()})}}}]),myctrl.directive("divb",["fac",function(t){return{link:function(t,e,a,o){e.on("blur",function(){var e=$(this).text();t.value.b[a.divb]=e,t.$apply()})}}}]),myctrl.directive("divc",["fac",function(t){return{link:function(t,e,a,o){e.on("blur",function(){var e=$(this).text();t.value.c[a.divc][a.key]=e,t.$apply()})}}}]),myctrl.directive("html2png",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){t.load(1),YS("html2canvas",function(){html2canvas($("#tocanvas"),{onrendered:function(e){var a=o.html2png+".png";t.load(0),$("#down_button").attr("href",e.toDataURL()),$("#down_button").attr("download",a),$("#down_button").css("display","inline-block"),$(".html2png").css("display","none")}})})})}}}]),myctrl.directive("closewin",["fac",function(t){return{link:function(t,e,a,o){e.on("click",function(){window.opener=null,window.open("","_self"),window.close()})}}}]),myctrl.directive("savefeed",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,2);a.com_feedFun=function(t){1==t.code?(layer.closeAll(),layer.msg("发布成功，谢谢参与",{icon:1})):layer.msg("发布失败",{icon:0})},a.com_feedTime.time=t.time(),a.$apply()})}}}]),myctrl.directive("getcodeid",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,2);t.setstore("prcodeid",o.sendid),t.setstore("cityid",o.cityid),t.setstore("proinfo",e.value),console.log(e.value),a.proinfo=e.value,$("#ptap").removeClass("dpn"),a.$apply()})}}}]),myctrl.directive("setprosin",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){t.setstore("prname",e.value.prname),t.setstore("scodeid",o.scodeid||"")})}}}]),myctrl.directive("savejilu",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.comctrlid);a.program_gether_saveData={codeid:t.getstore("prcodeid"),btime:a.program_gether_selData.btime,etime:a.program_gether_selData.etime},a.program_gether_saveFun=function(t){1==t.code?(layer.closeAll(),layer.msg("送检快照保存成功,您可以在送检快照中查看。",{icon:1})):layer.msg("送检快照保存失败",{icon:2})},a.program_gether_saveTime.time=t.time(),a.$apply()})}}}]),myctrl.directive("markfile",["fac",function(t){return{link:function(t,e,a,o){e.on("click",function(){$("#execl_form").ajaxSubmit({url:NaN,success:function(t){console.log(t)},error:function(t){}})})}}}]),myctrl.directive("proupload",["fac",function(t){return{link:function(e,a,o,n){a.on("change",function(){var a=t.getscope_byid(e,e.comctrlid);$(document).on("change",".a-upload",function(){var t=$(this).val();if(t.indexOf("jpg")==-1&&t.indexOf("png")==-1)return layer.msg('请上传"jpg"或者"png"格式的文件'),!1;o.proupload.split(".");$(o.formid).ajaxSubmit({url:root2+"ver1/Index/uploadImage",success:function(t){"pro"==o.proupload?a.winData.proimg=t.url:a.winData.sinimg=t.url,a.$apply()}})})})}}}]),myctrl.directive("probaseupload",["fac",function(t){return{link:function(e,a,o,n){a.on("change",function(){var a=t.getscope_byid(e,e.comctrlid),n={};console.log(a.winData);var i=$(this).val();return i.indexOf("jpg")==-1&&i.indexOf("png")==-1?(layer.msg('请上传"jpg"或者"png"格式的文件'),!1):void $(o.formid).ajaxSubmit({url:root2+"ver1/Index/uploadImage",success:function(e){n[o.imgtype]=e.url,n.codeid=o.probaseupload;var i=root2+config.url.com_em.url;t.post(i,n,function(t){if(1==t.code){var e="sinimg"==o.imgtype?a.winData:a.program_base_info[0];e[o.imgtype]=n[o.imgtype]}else layer.msg("上传失败")}),a.$apply()},error:function(t){}})})}}}]),myctrl.controller("comctrl",["$scope","facv","hdl",function(t,e,a){t.yscid=t.$id,t.com_update={time:0,params:{},data:{},done:function(t,e){layer.msg("更新成功")}},e.ysfetch(t,"com_update"),t.com_list={time:0,params:{},data:{}},e.ysfetch(t,"com_list"),t.com_list2={time:0,params:{},data:{}},e.ysfetch(t,"com_list2"),t.com_list3={time:0,params:{},data:{}},e.ysfetch(t,"com_list3"),t.com_list_page={time:0,params:{},data:{}},e.ysfetch(t,"com_list_page"),t.com_list_page2={time:0,params:{},data:{}},e.ysfetch(t,"com_list_page2"),t.com_list_page3={time:0,params:{},data:{}},e.ysfetch(t,"com_list_page3"),t.com_artlist_page={time:0,params:{},data:{}},e.ysfetch(t,"com_artlist_page"),t.com_detail={time:0,params:{},data:{}},e.ysfetch(t,"com_detail"),t.com_del={time:0,params:{},data:{}},e.ysfetch(t,"com_del"),t.com_del2={time:0,params:{},data:{}},e.ysfetch(t,"com_del2"),t.com_del3={time:0,params:{},data:{}},e.ysfetch(t,"com_del3"),t.com_editadd={time:0,params:{},data:{}},e.ysfetch(t,"com_editadd"),t.com_editadd2={time:0,params:{},data:{}},e.ysfetch(t,"com_editadd2"),t.com_editadd3={time:0,params:{},data:{}},e.ysfetch(t,"com_editadd3"),t.com_editadd4={time:0,params:{},data:{}},e.ysfetch(t,"com_editadd4"),t.com_editadd5={time:0,params:{},data:{}},e.ysfetch(t,"com_editadd5");var o=location.href.split("#/");url=o[1]||"demopage";var n=url.split("/"),i=n.join("_"),r=a[i];for(var c in r)if("init"==c)a[i][c](t);else{var l=i+"_"+c;t[l]=angular.copy(r[c]),e.ysfetch(t,l)}t.value={},t.tapshow=0,t.sinornot="yes",t.editstatus=0}]),myctrl.directive("tapshow",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.yscid);a.tapshow=o.tapshow,a.$apply()})}}}]),angular.module("render",["RongWebIMWidget"]).factory("hdl",["facv","WebIMWidget",function(t,e){var a={system_tbtype:{init:function(e){e.com_list.url="index/archive_select",e.com_list.params={codeid:"123",debug:0,debugkey:"c85",name:"资料模板列表"},e.com_list.before=function(t){},e.com_editadd.url="index/archivetree_update",e.com_editadd.params={codeid:"123",debug:0,debugkey:"c85",name:"增加或编辑一个资料模板"},e.com_list2.url="index/major_select",e.com_list2.params={codeid:"123",debug:0,debugkey:"c85",name:"获取专业列表"},e.com_list2.time=t.time(),e.com_list2.before=function(t){},e.com_editadd2.url="index/major_add",e.com_editadd2.params={},e.com_editadd2.before=function(t){return t.com_editadd2.params.name?t.com_editadd2.params.pid?void(t.com_editadd2.params.visible||(t.com_editadd2.params.visible=1)):(layer.msg("请选择省份！"),!1):(layer.msg("请填写专业名称"),!1)},e.com_editadd2.done=function(t,e){
t.code>0&&(layer.msg("提交成功！"),window.location.reload())},e.com_del.url="index/major_del",e.com_del.params={},e.com_del.before=function(t){},e.com_del.done=function(t,e){t.code>0?layer.msg("删除成功!"):layer.msg(t.msg)},e.com_list3.url="open/prov",e.com_list3.params={codeid:"123",debug:0,debugkey:"c85",name:"资料模板列表"},e.com_list3.time=t.time(),e.com_editadd3.url="index/archive_insert",e.com_editadd3.params={},e.com_editadd3.before=function(t){return t.com_editadd3.params.id?t.com_editadd3.params.name?t.com_editadd3.params.type?void(t.com_editadd3.params.visible||(t.com_editadd3.params.visible=1)):(layer.msg("请选择类型"),!1):(layer.msg("请填写菜单名称"),!1):(layer.msg("请选择上级菜单"),!1)},e.com_editadd3.done=function(t,e){return t.code>0?(layer.msg("提交成功！"),void setTimeout(function(){window.location.reload()},1e3)):(layer.msg(t.msg),!1)},e.com_editadd4.url="index/archive_update",e.com_editadd4.params={},e.com_editadd4.before=function(t){return t.com_editadd4.params.id?t.com_editadd4.params.name?t.com_editadd4.params.type?void(t.com_editadd4.params.visible||(t.com_editadd4.params.visible=1)):(layer.msg("请选择类型"),!1):(layer.msg("请填写菜单名称"),!1):(layer.msg("请选择上级菜单"),!1)},e.com_editadd4.done=function(t,e){return t.code>0?(layer.msg("提交成功！"),void setTimeout(function(){window.location.reload()},1e3)):(layer.msg(t.msg),!1)},e.com_editadd5.url="index/archive_update",e.com_editadd5.params={},e.com_editadd5.before=function(t){},e.com_editadd5.done=function(t,e){return t.code>0?void layer.msg("更新成功！"):(layer.msg(t.msg),!1)},e.com_del2.url="index/archive_del",e.com_del2.params={},e.com_del2.before=function(t){},e.com_del2.done=function(t,e){layer.msg(t.msg)}}},program_struct:{init:function(a){a.zlhzbody={url:""},a.Sdata=[],a.zlcodeid="",a.com_detail.url="Ziliao/getzldata",a.com_detail.params={},a.com_detail.done=function(t,e){t.data.length>0&&(e.zlcodeid=t.data[0].zlcodeid),e.Sdata=t.data},a.com_del.url="/index/template_delete",a.com_del.params={},a.com_del.before=function(t){t.com_del.params={codeid:t.com_detail.params.zlcodeid}},a.com_del.done=function(t,e){},a.com_update.url="/index/template_editadd",a.com_update.params={},a.com_update.before=function(t){t.com_update.params={prcodeid:t.com_detail.params.prcodeid,codeid:t.com_detail.params.codeid,scodeid:t.com_detail.params.scodeid,acodeid:t.com_detail.params.acodeid,zlcodeid:t.com_detail.params.zlcodeid,savestr:JSON.stringify(t.Sdata)}},a.com_update.done=function(t,e){},console.log(e),a.com_list.url="index/archivetree_select",a.com_list.params={codeid:"123",debug:0,debugkey:"c85",name:"demo测试接口"},a.com_list.time=t.time(),a.com_list.before=function(t){},a.com_list.done=function(e,a){YS("zTree",function(){function o(e,o,n,i){a.zlhzbody.url="ziliao/gd/tujian/"+n.code+".html",a.com_detail.params.code=n.code?n.code:"",a.com_detail.params.codeid=n.codeid?n.codeid:"",a.com_detail.params.scodeid=n.scodeid?n.scodeid:"",a.com_detail.params.prcodeid=n.prcodeid?n.prcodeid:"",a.com_detail.params.acodeid=n.acodeid?n.acodeid:"",a.com_detail.time=t.time(),a.$apply()}function n(t,e,a){a||"button"==t.target.tagName.toLowerCase()||0!=$(t.target).parents("a").length?a&&!a.noR&&(d.selectNode(a),i("node",t.clientX,t.clientY)):(d.cancelSelectedNode(),i("root",t.clientX,t.clientY))}function i(t,e,a){$("#rMenu ul").show(),"root"==t?($("#m_del").hide(),$("#m_check").hide(),$("#m_unCheck").hide()):($("#m_del").show(),$("#m_check").show(),$("#m_unCheck").show()),a+=document.body.scrollTop,e+=document.body.scrollLeft,s.css({top:a+"px",left:e+"px",visibility:"visible"}),$("body").bind("mousedown",r)}function r(t){"rMenu"==t.target.id||$(t.target).parents("#rMenu").length>0||s.css({visibility:"hidden"})}var c={data:{simpleData:{enable:!0}},view:{dblClickExpand:!1},check:{enable:!0},callback:{onRightClick:n,onClick:o}},l=e.data;console.log(l);var d,s;$(document).ready(function(){$.fn.zTree.init($("#treeDemo"),c,l),d=$.fn.zTree.getZTreeObj("treeDemo"),s=$("#rMenu")})})},RongIMLib.RongIMClient.init("k51hidwqkn7cb"),RongIMClient.setConnectionStatusListener({onChanged:function(t){switch(t){case RongIMLib.ConnectionStatus.CONNECTED:console.log("链接成功");break;case RongIMLib.ConnectionStatus.CONNECTING:console.log("正在链接");break;case RongIMLib.ConnectionStatus.DISCONNECTED:console.log("断开连接");break;case RongIMLib.ConnectionStatus.KICKED_OFFLINE_BY_OTHER_CLIENT:console.log("其他设备登录");break;case RongIMLib.ConnectionStatus.DOMAIN_INCORRECT:console.log("域名不正确");break;case RongIMLib.ConnectionStatus.NETWORK_UNAVAILABLE:console.log("网络不可用")}}}),RongIMClient.setOnReceiveMessageListener({onReceived:function(t){switch(t.messageType){case RongIMClient.MessageType.TextMessage:break;case RongIMClient.MessageType.VoiceMessage:break;case RongIMClient.MessageType.ImageMessage:break;case RongIMClient.MessageType.DiscussionNotificationMessage:break;case RongIMClient.MessageType.LocationMessage:break;case RongIMClient.MessageType.RichContentMessage:break;case RongIMClient.MessageType.InformationNotificationMessage:break;case RongIMClient.MessageType.ContactNotificationMessage:break;case RongIMClient.MessageType.ProfileNotificationMessage:break;case RongIMClient.MessageType.CommandNotificationMessage:break;case RongIMClient.MessageType.CommandMessage:break;case RongIMClient.MessageType.UnknownMessage:}}});var o="nItCX7gErftua4tNM5x3978pahRwm7+sVU505ICWdxb/VPko2Dzxz3cdSY5KIG4nEIV5mCCo0ZQ=";RongIMClient.connect(o,{onSuccess:function(t){console.log("Connect successfully."+t)},onTokenIncorrect:function(){console.log("token无效")},onError:function(t){var e="";switch(t){case RongIMLib.ErrorCode.TIMEOUT:e="超时";break;case RongIMLib.ErrorCode.UNKNOWN_ERROR:e="未知错误";break;case RongIMLib.ErrorCode.UNACCEPTABLE_PaROTOCOL_VERSION:e="不可接受的协议版本";break;case RongIMLib.ErrorCode.IDENTIFIER_REJECTED:e="appkey不正确";break;case RongIMLib.ErrorCode.SERVER_UNAVAILABLE:e="服务器不可用"}console.log(t)}})}}};return a}]),myctrl.directive("ysselect",["fac",function(t){return{link:function(e,a,o,n){a.on("change",function(){var a=o.ysselect.split("."),n=t.getscope_byid(e,e.yscid);n[a[0]][a[1]][a[2]]=$(this).val(),n.$apply()})}}}]),myctrl.directive("tapshowrun",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.yscid);a.tapshow=o.tap,a[o.tapshowrun].time=t.time(),a.$apply()})}}}]),myctrl.directive("tapshowrunzl",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.yscid);a.tapshow=o.tap,a[o.tapshowrunzl].params.codeid=o.codeid,a[o.tapshowrunzl].time=t.time(),a.$apply()})}}}]),myctrl.directive("ysaddpid",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.yscid);a[o.ysaddpid].params.id=e.value.id,a.$apply()})}}}]),myctrl.directive("ysupdateone",["fac",function(t){return{link:function(e,a,o,n){a.on("change",function(){var a=t.getscope_byid(e,e.yscid),n=o.ysupdateone.split(".");1==o.num?a[n[0]][n[1]].id=e.value.id:a[n[0]][n[1]]=e.value,a[n[0]][n[1]][n[2]]=$(this).val(),a[n[0]].time=t.time(),a.$apply()})}}}]),myctrl.directive("ysupdateshow",["fac",function(t){return{link:function(e,a,o,n){a.on("change",function(){var n=t.getscope_byid(e,e.yscid),i=o.ysupdateshow.split("."),r=$(a).is(":checked");r?(n[i[0]][i[1]][i[2]]=1,e.value.visible=1):(n[i[0]][i[1]][i[2]]=0,e.value.visible=0),n[i[0]][i[1]].id=e.value.id,n[i[0]].time=t.time(),n.$apply()})}}}]),myctrl.directive("yseditadd",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.yscid);if(a[o.yseditadd].params=e.value||a.value||"",a[o.yseditadd].params.pid=e.value.pid,o.timeobj&&(a[o.timeobj].time=t.time()),o.checkbox)for(var n=o.checkbox.split(","),i=0;i<n.length;i++)a[o.yseditadd].params[n[i]]=[];console.log(a[o.yseditadd].params),a.$apply()})}}}]),myctrl.directive("comdelones",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.yscid),n=o.comdelones,i=o.theid||"id",r=o.tip?o.tip:"您确定要删除么？",c=layer.confirm(r,{btn:["确定","取消"]},function(){a[n].params[i]=e.value[i],a[n].done=function(t,a){1==t.code?(e.value.isdel=1,layer.msg("删除成功")):layer.msg(t.msg),layer.close(c)},a[n].time=t.time(),a.$apply()})})}}}]),myctrl.directive("comtime",["fac",function(t){return{link:function(e,a,o,n){a.on("click",function(){var a=t.getscope_byid(e,e.yscid);a[o.comtime].time=t.time(),a.$apply()})}}}]),myctrl.directive("savezl",["fac",function(t){return{link:function(t,e,a,o){e.on("change",function(){})}}}])});